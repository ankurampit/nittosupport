(()=>{"use strict";const{Component:e,createElement:t,render:n,useState:s,useEffect:r,Fragment:i}=wp.element,a=e=>{const[n,a]=s(e.duration),[o,u]=s({d:0,h:0,m:0,s:0});r((()=>{e.start?setTimeout((()=>{let t=n-1;t<=-1?e.update(e.question,"expired"):t>=0&&(a(t),c())}),1e3):(a(e.duration),c())}),[n,e.start,e.duration]);const c=()=>{let e={...o},t=n;t>86400?(e.d=Math.floor(t/86400),t-=86400*e.d):e.d=0,t>3600?(e.h=Math.floor(t/3600),t-=3600*e.h):e.h=0,t>60?(e.m=Math.floor(t/60),t-=60*e.m):e.m=0,e.s=t,u(e)};let l=0;return n>-1&&(l=Math.floor((e.question.question_duration-n)/e.question.question_duration*100),l<=0&&(l=1)),t("div",{className:"QuestionDuration"},t("div",{className:"question_timer"},t("div",{className:"question-duration-progress"},t("span",{style:{width:100-l+"%"}})),t("span",null,t("span",{className:"question_timer_amount"},o.m?t(i,null,t("span",null,o.m.toString().length<2?"0"+o.m:o.m),t("span",null,":")):t(i,null,t("span",null,"00"),t("span",null,":")),o.s?t(i,null,t("span",null,o.s.toString().length<2?"0"+o.s:o.s)):"00"))))},{createElement:o,useState:u,useEffect:c,Fragment:l,render:d}=wp.element,_=({progress:e,size:t})=>{let n,s;switch(t){case"xs":n=10,s=1;break;case"s":n=12,s=1.2;break;case"sm":n=25,s=2.5;break;case"med":default:n=50,s=5;break;case"lg":n=75,s=7.5;break;case"xl":n=100,s=10}const r=n-2*s,i=2*r*Math.PI,a=i-e/100*i;return o("div",{className:"react-progress-circle"},o("svg",{height:2*n,width:2*n},o("circle",{className:"ReactProgressCircle_circleBackground",strokeWidth:s,style:{strokeDashoffset:a},r,cx:n,cy:n}),o("circle",{className:"ReactProgressCircle_circle",strokeWidth:s,strokeDasharray:i+" "+i,style:{strokeDashoffset:a},r,cx:n,cy:n})))},{Component:m,createElement:p,render:h,useState:g,useEffect:w,Fragment:f}=wp.element,q=e=>{const[t,n]=g(e.duration),[s,r]=g({d:0,h:0,m:0,s:0});w((()=>{e.start?setTimeout((()=>{let s=t-1;s<=-1?e.update(e.quiz_id,"expired"):s>=0&&(n(s),i())}),1e3):(n(e.duration),i())}),[t,e.start,e.duration]);const i=()=>{let e={...s},n=t;n>86400?(e.d=Math.floor(n/86400),n-=86400*e.d):e.d=0,n>3600?(e.h=Math.floor(n/3600),n-=3600*e.h):e.h=0,n>60?(e.m=Math.floor(n/60),n-=60*e.m):e.m=0,e.s=n,r(e)};let a=0;return t>-1&&(a=Math.floor((e.duration-t)/e.duration*100),a<=0&&(a=1)),p("div",{className:"quiztimer"},p("div",{className:"circle_timer"},a?p(_,{size:window.innerWidth<480?"xs":"sm",progress:a}):"",p("span",null,p("span",{className:"timer_amount"},s.d?p(f,null,p("span",null,s.d),p("span",null,":")):"",s.h?p(f,null,p("span",null,s.h),p("span",null,":")):"",s.m?p(f,null,p("span",null,s.m),p("span",null,":")):"",p("span",null,s.s)),p("span",{className:"timer_unit"},s.d?p(f,null,p("span",null,window.wplms_course_data.translations.days),p("span",null)):"",s.h?p(f,null,p("span",null,window.wplms_course_data.translations.hours),p("span",null)):"",s.m?p(f,null,p("span",null,window.wplms_course_data.translations.minutes),p("span",null)):"",p("span",null,window.wplms_course_data.translations.seconds)))))},{createElement:b,render:y,useState:v,useEffect:k,useContext:x,Fragment:z,RawHTML:N}=wp.element,{dispatch:S,select:O}=wp.data,{createElement:E,render:P,useState:I,useEffect:C,Fragment:M}=wp.element,F=e=>{const[t,n]=I({});C((()=>{n(e.question)}),[e.question]);let s="";t.hasOwnProperty("marked_answer")&&(s=t.marked_answer);let r="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(r="question_incorrect",t.usercorrect>0&&(r="question_correct")),E(M,null,E("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),E("input",{type:"text",className:r,value:s,onChange:s=>{let r={...e.question};t?.expired||(r.marked_answer=s.target.value,n(r),e.update(r,e.index,"changed"))}}))},{createElement:D,render:B,useState:T,useEffect:A,Fragment:L}=wp.element,H=e=>{const[t,n]=T({}),[s,r]=T([]);A((()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&i(t),r(t)}}),[e.question.options,e.question.correct_indexes]);const i=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}};let a="";return t.hasOwnProperty("marked_answer")&&t.marked_answer,D(L,null,D("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?D(L,null,(t=>s.map((function(s,r){let i=t.options.findIndex((e=>e==s));return D("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(i)?"question_correct":"question_incorrect":"")},D("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:i,id:e.quiz_id+"_"+t.id+i,checked:parseInt(t.marked_answer)===i,onChange:s=>{let r={...t};e?.question?.expired||(r.marked_answer=s.target.value,n(r),e.update(r,e.index,"changed"))}}),D("label",{for:e.quiz_id+"_"+t.id+i,dangerouslySetInnerHTML:{__html:s}}))})))(t),t.attempted?"":D("span",{className:"resetq_answer button",onClick:t=>{let s={...e.question};s.marked_answer=null,n(s),e.update(s,e.index,"changed")}},D("i",{class:"vicon vicon-trash"}))):"")},{createElement:j,render:R,useState:J,useEffect:$,Fragment:U}=wp.element,X=e=>{const[t,n]=J({}),[s,r]=J(-1);$((()=>{n(e.question)}),[e.question]);const i=(s,i)=>{if(t?.expired)return;let a={...e.question};a.marked_answer&&a.marked_answer.length||(a.marked_answer=[]),a.marked_answer[i]=s,n(a),e.update(a,e.index,"changed"),r(-1)};return j(U,null,t&&t.extra_content&&Array.isArray(t.extra_content)?j("div",{className:"question_content"},t.extra_content.map((function(n,a){return j(U,null,j("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:n}}),t.options&&t.options.length&&a<t.extra_content.length-1?j(U,null,((t,n)=>j(U,null,j("span",{className:t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(n)?"question_correct":"question_incorrect":""},s===n?j("select",{name:e.quiz_id+"_"+t.id,id:e.quiz_id+"_"+t.id,onChange:e=>{t?.expired||i(e.target.value,n)}},j("option",null,window.wplms_course_data.translations.select_option),((e,t)=>e.options.map((function(n,s){return e.hasOwnProperty("options_arr")&&e.options_arr&&e.options_arr.length&&e.options_arr[t]&&e.options_arr[t].length?e.options_arr[t].includes((s+1).toString())||e.options_arr[t].includes(s+1)?j("option",{value:s,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===s,dangerouslySetInnerHTML:{__html:n}}):void 0:j("option",{value:s,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===s,dangerouslySetInnerHTML:{__html:n}})})))(t,n)):t.options.length&&t.hasOwnProperty("marked_answer")&&t.marked_answer.length&&t.marked_answer[n]?j("span",{className:"selectimitate ",dangerouslySetInnerHTML:{__html:t.options[t.marked_answer[n]]},onClick:()=>{t?.expired||r(n)}}):j("span",{className:"selectimitate no_value",onClick:()=>{r(n)}})),t.attempted?"":j("span",{className:"resetq_answer button",onClick:e=>{i(null,n)}},j("i",{class:"vicon vicon-trash"}))))(t,a)):"")}))):"")},{createElement:W,render:Q,useState:Y,useEffect:K,Fragment:V}=wp.element,G=e=>{const[t,n]=Y({}),[s,r]=Y([]);"undefined"!=e.question.marked_answer&&null!=e.question.marked_answer||(e.question.marked_answer=[]),K((()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&i(t),r(t)}}),[e.question.options,e.question.correct_indexes]);const i=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}};return W(V,null,W("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?W(V,null,(t=>{if(s&&s.length)return s.map((function(s,r){let i=t.options.findIndex((e=>e==s));return W("div",{className:"question_option checkbox "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(i)?"question_correct":"question_incorrect":"")},W("input",{type:"checkbox",name:e.quiz_id+"_"+t.id,value:i,id:e.quiz_id+"_"+t.id+i,checked:e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.includes(i),onChange:s=>{let r={...t};if(!e?.question?.expired){if(r.marked_answer.includes(i)){let e=r.marked_answer.indexOf(i);e>-1&&r.marked_answer.splice(e,1)}else r.marked_answer.push(i);n(r),e.update(r,e.index,"changed")}}}),W("label",{for:e.quiz_id+"_"+t.id+i,dangerouslySetInnerHTML:{__html:s}}))}))})(t),t.attempted?"":W("span",{className:"resetq_answer button",onClick:t=>{let s={...e.question};s.marked_answer=null,n(s),e.update(s,e.index,"changed")}},W("i",{class:"vicon vicon-trash"}))):"")},{createElement:Z,render:ee,useState:te,useEffect:ne,Fragment:se}=wp.element,re=e=>{const[t,n]=te("120"),[s,r]=te((()=>{let t="";return e.marked_answer&&e.marked_answer.length&&(t=e.marked_answer[e.index]),t}));ne((()=>{void 0!==s&&s&&s.length>15&&n(8*s.length)}),[s]);let i="";return s&&(i=s),Z(se,null,Z("div",{className:"fillblank_area"},Z("input",{type:"text",value:i,onChange:t=>{if(!e.canedit)return;let n=s;n=t.target.value,r(n),e.update(n,e.index,"changed")},style:{width:t+"px"}})))},{createElement:ie,render:ae,useState:oe,useEffect:ue,Fragment:ce}=wp.element,le=e=>{const[t,n]=oe({});ue((()=>{n(e.question)}),[e.question]);let s="";t.hasOwnProperty("marked_answer")&&t.marked_answer;const r=(s,r,i)=>{if("changed"==i){if(e?.question?.expired)return;let i={...t};i.marked_answer&&t.marked_answer.length||(i.marked_answer=[]),i.marked_answer[r]=s,n(i),e.update(i,e.index,"changed")}};return ie(ce,null,t&&t.extra_content&&Array.isArray(t.extra_content)?ie("div",{className:"question_content"},t.extra_content.map((function(n,s){return ie(ce,null,ie("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:n}}),s<t.extra_content.length-1?ie("div",{className:"fillblank_area "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(s)?"question_correct":"question_incorrect":"")},ie(re,{update:r,index:s,marked_answer:t.marked_answer,canedit:!e?.question?.expired})):"")}))):"")},{createElement:de,render:_e,useState:me,useEffect:pe,Fragment:he}=wp.element,ge=e=>{const[t,n]=me([]),[s,r]=me(!1),[i,a]=me([]),[o,u]=me([]),[c,l]=me([]),[d,_]=me([]);pe((()=>{a(e.items)}),[e.items]);let m="droppable";s&&(m+=" active");const p=e=>{let t="";return s===i[e]&&(t="dragging"),t};return de("div",{className:m},i.map(((m,h)=>de("div",{key:h,onDragStart:e=>{i[h]&&r(i[h])},onDragEnd:()=>{r(!1)},onDragOver:t=>{t.preventDefault(),((t,n)=>{if(!s)return;let r=i[n];if(s===r)return;let o=[...i];o=o.filter((e=>e!=s)),o.splice(n,0,s),a(o),e.update(o,"changed")})(0,h)},ref:e=>{((e,s)=>{if(e){let r=t;r[s]||(r[s]=e),n(r)}})(e,h)},draggable:!e.question?.expired,style:d[h],onTouchStart:e=>{let n=[...c];t.map(((e,t)=>{let s=e.getBoundingClientRect();n[t]=s})),l(n),i[h]&&r(i[h])},onTouchMove:e=>{e.preventDefault();let t=[];if("touchmove"===e.type){let n=[...d];n[h]={transform:"translateY("+Math.floor(e.touches[0].clientY-c[h].top)+"px)"},_(n),t.push(i[h]);let s=[];if(e.touches[0].clientY&&c.map(((n,r)=>{n.top+n.height/2>e.touches[0].clientY&&i[r]!==i[h]&&t.push(i[r]),n.bottom-n.height/2<e.touches[0].clientY&&i[r]!==i[h]&&s.push(i[r])})),s.length)for(let e=s.length-1;e>=0;e--)t.unshift(s[e]);u(t)}},onTouchEnd:t=>{a(o),e.update(o,"changed"),l([]),_([]),r(!1),u([])},className:p(h)+" "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(h)?"question_correct":"question_incorrect":"")},de("div",{dangerouslySetInnerHTML:{__html:m}})))))},{createElement:we,render:fe,useState:qe,useEffect:be,Fragment:ye}=wp.element,ve=e=>{e.question.id,e.quiz_id;const[t,n]=qe({}),[s,r]=qe(!1);return be((()=>{let t=e.question;if(!s&&t&&t.marked_answer&&t.marked_answer.length&&"undefined"!=t.marked_answer){let e=[];t.marked_answer.map(((n,s)=>{e.push(t.original_options[parseInt(n)-1])})),t.options=e,n(t),r(!0)}n(t)}),[e.question]),we(ye,null,we("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?we(ye,null,we(ge,{items:t.options,original_items:t.original_options,update:(s,r)=>{if(!t?.expired&&"changed"==r){let r=t;r.marked_answer=[],s.map(((e,t)=>{let n=r.original_options.indexOf(e);r.marked_answer.push(n+1)})),n(r),e.update(r,e.index,"changed")}},question:t}),t.attempted?"":we("span",{className:"resetq_answer button",onClick:s=>{let r={...t};r.marked_answer=null,r.options=r.original_options,n(r),e.update(r,e.index,"changed")}},we("i",{class:"vicon vicon-trash"}))):"")},{createElement:ke,render:xe,useState:ze,useEffect:Ne,Fragment:Se}=wp.element;function Oe(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}const Ee=e=>{const[t,n]=ze([]),[s,r]=ze(!1),[i,a]=ze([]),[o,u]=ze(""),[c,l]=ze([]),[d,_]=ze(e.matches),[m,p]=ze([]),[h,g]=ze([]),[w,f]=ze([]),[q,b]=ze({}),[y,v]=ze([]),[k,x]=ze([]),[z,N]=ze([]),[S,O]=ze({x:0,y:0}),[E,P]=ze([]);Ne((()=>{let t=[...e.items];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map((n=>{n&&"NaN"!=typeof n&&(t=t.filter((t=>t!=e.question.original_options[n-1])))})),l(t);let n=[];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map((e=>{parseFloat(e)-1>=0?n.push(e-1):n.push(null)})),N(n),e.update(!1,"reset")}),[e.items,e.reset]);let I="droppable";s&&(I+=" active");const C=e=>{let t="";return s===c[e]&&(t="dragging"),t};return ke("div",{className:"match_playground"},ke("div",{className:"match_options"},d&&d.length?d.map(((n,u)=>ke("div",{key:u,className:"match_option "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(u)?"question_correct":"question_incorrect":""),onDrop:t=>{((t,n)=>{if(!s)return;if(E.index===n)return;let r=[...c],i=[...z];if(!i[n]&&0!==i[n]){r=r.filter((e=>e!=s));let t=e.original_items.indexOf(s);d&&d.length&&d.map(((e,t)=>{Oe(i[t])&&(i[t]=null)})),Oe(n)||(i[n]=t),N(i),l(r),e.update(i,"changed")}})(0,u)},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,t)=>{if(e){let n=i;n[t]||(n[t]=e),a(n)}})(e,u)}},ke("div",{dangerouslySetInnerHTML:{__html:n}}),ke("div",{className:"children"},e.original_items&&null!=z[u]&&e.original_items[z[u]]?ke("div",{key:"droppablediv"+u,draggable:!e.question?.expired,onDragStart:t=>{e.original_items[z[u]]&&(r(e.original_items[z[u]]),P({index:u,source:"droppablediv"}))},onDragEnd:()=>{r(!1),P({})},onDragOver:e=>{e.preventDefault()},className:C(u),style:k[z[u]],onTouchStart:n=>{let s=[...h];t.map(((e,t)=>{let n=e.getBoundingClientRect();s[t]=n})),g(s);let a=[...w];i.map(((e,t)=>{let n=e.getBoundingClientRect();a[t]=n})),f(a),b(o.getBoundingClientRect()),e.original_items[z[u]]&&(r(e.original_items[z[u]]),P({index:u,source:"droppablediv"})),P({})},onTouchMove:e=>{if(e&&(e.preventDefault(),"touchmove"===e.type)){let t=[...k];t[z[u]]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},x(t),O({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{let n=[...c],i=[...z];q.top<S.y&&q.top+q.height>S.y&&q.left<S.x&&q.left+q.width>S.x&&(n.push(s),i.map(((e,t)=>{e==z[u]&&(i[t]=null)}))),f([]),b({}),r(!1),x([]),v([]),l(n),N(i),e.update(i,"changed"),O({x:0,y:0})}},ke("div",{dangerouslySetInnerHTML:{__html:e.original_items[z[u]]}})):"")))):""),ke("div",{className:I,onDragOver:e=>{e.preventDefault()},onDrop:t=>{(t=>{if("droppablediv"!==E.source)return;if(!s)return;let n=[...c],r=[...z];n.includes(s)||n.push(s),l(n),Oe(E.index)||(r[E.index]=null),N(r),e.update(r,"changed")})()},ref:e=>{var t;(t=e)&&u(t)}},c&&c.length?c.map(((s,a)=>ke("div",{key:"draggablediv"+a,onDragStart:e=>{c[a]&&r(c[a]),P({})},onDragEnd:()=>{r(!1),P({})},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,s)=>{if(e){let r=t;r[s]||(r[s]=e),n(r)}})(e,a)},draggable:!e.question?.expired,style:y[a],onTouchStart:e=>{let n=[...h];t.map(((e,t)=>{let s=e.getBoundingClientRect();n[t]=s})),g(n);let a=[...w];i.map(((e,t)=>{let n=e.getBoundingClientRect();a[t]=n})),f(a),s&&r(s),P({})},onTouchMove:e=>{if(e.preventDefault(),"touchmove"===e.type){let t=[...y];t[a]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},v(t),O({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{v([]);let n=[...c],i=[...z];w.map(((t,r)=>{if(t.top<S.y&&t.top+t.height>S.y&&t.left<S.x&&t.left+t.width>S.x){let t=e.original_items.indexOf(s);t>=0&&!i[r]&&0!==i[r]&&(i[r]=t,n=n.filter((e=>e!=s)))}})),f([]),r(!1),l(n),N(i),e.update(i,"changed"),O({x:0,y:0})},className:C(a)},ke("div",{dangerouslySetInnerHTML:{__html:s}})))):""))},{createElement:Pe,render:Ie,useState:Ce,useEffect:Me,Fragment:Fe}=wp.element,De=e=>{e.question.id,e.quiz_id;const[t,n]=Ce({}),[s,r]=Ce(!1);return Me((()=>{n(e.question)}),[e.question]),Pe(Fe,null,Pe("div",{className:"question_content"},Pe("div",{className:"question_statement",dangerouslySetInnerHTML:{__html:t&&t.extra_content&&t.extra_content.statement?t.extra_content.statement:""}}),t.options&&t.options.length&&t.content.match&&t.content.match.length?Pe(Ee,{matches:t.extra_content.match,original_matches:t.extra_content.match,items:t.options,original_items:t.original_options,update:(s,i)=>{if(!e?.question?.expired){if("changed"==i){let r={...t};r.marked_answer=[],s.map((e=>{r.marked_answer.push(parseInt(e)+1)})),n(r),e.update(r,e.index,"changed")}"reset"==i&&r(!1)}},reset:s,question:t}):"",Pe("div",{className:"question_end",dangerouslySetInnerHTML:{__html:t&&t.content&&t.content.end?t.content.end:""}})),t.attempted?"":Pe("span",{className:"resetq_answer button",onClick:s=>{r(!0);let i={...t};i.marked_answer=null,i.options=i.original_options,n(i),e.update(i,e.index,"changed")}},Pe("i",{class:"vicon vicon-trash"})))},{createElement:Be,render:Te,useState:Ae,useEffect:Le,Fragment:He}=wp.element,je=e=>{const[t,n]=Ae(e.question);Le((()=>{n(e.question)}),[e.question]);let s="";return t.hasOwnProperty("marked_answer")&&t.marked_answer,Be(He,null,Be("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?Be(He,null,(t=>t.options.map((function(s,r){return Be("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(r)?"question_correct":"question_incorrect":"")},Be("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:r,id:e.quiz_id+"_"+t.id+r,checked:parseInt(t.marked_answer)===r,onChange:s=>{if(e?.question?.expired)return;let r={...t};r.marked_answer=s.target.value,n(r),e.update(r,e.index,"changed")}}),Be("label",{for:e.quiz_id+"_"+t.id+r,dangerouslySetInnerHTML:{__html:s}}))})))(t),t.attempted?"":Be("span",{className:"resetq_answer button",onClick:t=>{let s={...e.question};s.marked_answer=null,n(s)}},Be("i",{class:"vicon vicon-trash"}))):"")},{createElement:Re,render:Je,useState:$e,useEffect:Ue,Fragment:Xe}=wp.element,We=e=>{const[t,n]=$e({});Ue((()=>{n(e.question)}),[e.question]);let s="";t.hasOwnProperty("marked_answer")&&(s=t.marked_answer);let r="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(r="question_incorrect",t.usercorrect>0&&(r="question_correct")),Re(Xe,null,Re("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),Re("textarea",{className:r,type:"text",onChange:t=>{let s={...e.question};s.marked_answer=t.target.value,n(s),e.update(s,e.index,"changed")},value:s},s))};var Qe,Ye,Ke=Ke||function(e,t){var n={},s=n.lib={},r=function(){},i=s.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=s.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,s=this.sigBytes;if(e=e.sigBytes,this.clamp(),s%4)for(var r=0;r<e;r++)t[s+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(s+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[s+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],s=0;s<t;s+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),o=n.enc={},u=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],s=0;s<e;s++){var r=t[s>>>2]>>>24-s%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],s=0;s<t;s+=2)n[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new a.init(n,t/2)}},c=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],s=0;s<e;s++)n.push(String.fromCharCode(t[s>>>2]>>>24-s%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],s=0;s<t;s++)n[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new a.init(n,t)}},l=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=s.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,s=n.words,r=n.sigBytes,i=this.blockSize,o=r/(4*i);if(t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*i,r=e.min(4*t,r),t){for(var u=0;u<t;u+=i)this._doProcessBlock(s,u);u=s.splice(0,t),n.sigBytes-=r}return new a.init(u,r)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});s.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new _.HMAC.init(e,n).finalize(t)}}});var _=n.algo={};return n}(Math);Ye=(Qe=Ke).lib.WordArray,Qe.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,s=this._map;e.clamp(),e=[];for(var r=0;r<n;r+=3)for(var i=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;4>a&&r+.75*a<n;a++)e.push(s.charAt(i>>>6*(3-a)&63));if(t=s.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;(s=n.charAt(64))&&-1!=(s=e.indexOf(s))&&(t=s);for(var s=[],r=0,i=0;i<t;i++)if(i%4){var a=n.indexOf(e.charAt(i-1))<<i%4*2,o=n.indexOf(e.charAt(i))>>>6-i%4*2;s[r>>>2]|=(a|o)<<24-r%4*8,r++}return Ye.create(s,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,n,s,r,i,a){return((e=e+(t&n|~t&s)+r+a)<<i|e>>>32-i)+t}function n(e,t,n,s,r,i,a){return((e=e+(t&s|n&~s)+r+a)<<i|e>>>32-i)+t}function s(e,t,n,s,r,i,a){return((e=e+(t^n^s)+r+a)<<i|e>>>32-i)+t}function r(e,t,n,s,r,i,a){return((e=e+(n^(t|~s))+r+a)<<i|e>>>32-i)+t}for(var i=Ke,a=(u=i.lib).WordArray,o=u.Hasher,u=i.algo,c=[],l=0;64>l;l++)c[l]=4294967296*e.abs(e.sin(l+1))|0;u=u.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var a=0;16>a;a++){var o=e[u=i+a];e[u]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}a=this._hash.words;var u=e[i+0],l=(o=e[i+1],e[i+2]),d=e[i+3],_=e[i+4],m=e[i+5],p=e[i+6],h=e[i+7],g=e[i+8],w=e[i+9],f=e[i+10],q=e[i+11],b=e[i+12],y=e[i+13],v=e[i+14],k=e[i+15],x=t(x=a[0],S=a[1],N=a[2],z=a[3],u,7,c[0]),z=t(z,x,S,N,o,12,c[1]),N=t(N,z,x,S,l,17,c[2]),S=t(S,N,z,x,d,22,c[3]);x=t(x,S,N,z,_,7,c[4]),z=t(z,x,S,N,m,12,c[5]),N=t(N,z,x,S,p,17,c[6]),S=t(S,N,z,x,h,22,c[7]),x=t(x,S,N,z,g,7,c[8]),z=t(z,x,S,N,w,12,c[9]),N=t(N,z,x,S,f,17,c[10]),S=t(S,N,z,x,q,22,c[11]),x=t(x,S,N,z,b,7,c[12]),z=t(z,x,S,N,y,12,c[13]),N=t(N,z,x,S,v,17,c[14]),x=n(x,S=t(S,N,z,x,k,22,c[15]),N,z,o,5,c[16]),z=n(z,x,S,N,p,9,c[17]),N=n(N,z,x,S,q,14,c[18]),S=n(S,N,z,x,u,20,c[19]),x=n(x,S,N,z,m,5,c[20]),z=n(z,x,S,N,f,9,c[21]),N=n(N,z,x,S,k,14,c[22]),S=n(S,N,z,x,_,20,c[23]),x=n(x,S,N,z,w,5,c[24]),z=n(z,x,S,N,v,9,c[25]),N=n(N,z,x,S,d,14,c[26]),S=n(S,N,z,x,g,20,c[27]),x=n(x,S,N,z,y,5,c[28]),z=n(z,x,S,N,l,9,c[29]),N=n(N,z,x,S,h,14,c[30]),x=s(x,S=n(S,N,z,x,b,20,c[31]),N,z,m,4,c[32]),z=s(z,x,S,N,g,11,c[33]),N=s(N,z,x,S,q,16,c[34]),S=s(S,N,z,x,v,23,c[35]),x=s(x,S,N,z,o,4,c[36]),z=s(z,x,S,N,_,11,c[37]),N=s(N,z,x,S,h,16,c[38]),S=s(S,N,z,x,f,23,c[39]),x=s(x,S,N,z,y,4,c[40]),z=s(z,x,S,N,u,11,c[41]),N=s(N,z,x,S,d,16,c[42]),S=s(S,N,z,x,p,23,c[43]),x=s(x,S,N,z,w,4,c[44]),z=s(z,x,S,N,b,11,c[45]),N=s(N,z,x,S,k,16,c[46]),x=r(x,S=s(S,N,z,x,l,23,c[47]),N,z,u,6,c[48]),z=r(z,x,S,N,h,10,c[49]),N=r(N,z,x,S,v,15,c[50]),S=r(S,N,z,x,m,21,c[51]),x=r(x,S,N,z,b,6,c[52]),z=r(z,x,S,N,d,10,c[53]),N=r(N,z,x,S,f,15,c[54]),S=r(S,N,z,x,o,21,c[55]),x=r(x,S,N,z,g,6,c[56]),z=r(z,x,S,N,k,10,c[57]),N=r(N,z,x,S,p,15,c[58]),S=r(S,N,z,x,y,21,c[59]),x=r(x,S,N,z,_,6,c[60]),z=r(z,x,S,N,q,10,c[61]),N=r(N,z,x,S,l,15,c[62]),S=r(S,N,z,x,w,21,c[63]),a[0]=a[0]+x|0,a[1]=a[1]+S|0,a[2]=a[2]+N|0,a[3]=a[3]+z|0},_doFinalize:function(){var t=this._data,n=t.words,s=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var i=e.floor(s/4294967296);for(n[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,s=0;4>s;s++)r=n[s],n[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=o._createHelper(u),i.HmacMD5=o._createHmacHelper(u)}(Math),function(){var e,t=Ke,n=(e=t.lib).Base,s=e.WordArray,r=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(o=this.cfg).hasher.create(),r=s.create(),i=r.words,a=o.keySize,o=o.iterations;i.length<a;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var c=1;c<o;c++)u=n.finalize(u),n.reset();r.concat(u)}return r.sigBytes=4*a,r}});t.EvpKDF=function(e,t,n){return r.create(n).compute(e,t)}}(),Ke.lib.Cipher||function(e){var t=(m=Ke).lib,n=t.Base,s=t.WordArray,r=t.BufferedBlockAlgorithm,i=m.enc.Base64,a=m.algo.EvpKDF,o=t.Cipher=r.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,s){return("string"==typeof n?p:_).encrypt(e,t,n,s)},decrypt:function(t,n,s){return("string"==typeof n?p:_).decrypt(e,t,n,s)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=m.mode={},c=function(e,t,n){var s=this._iv;s?this._iv=void 0:s=this._prevBlock;for(var r=0;r<n;r++)e[t+r]^=s[r]},l=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var n=this._cipher,s=n.blockSize;c.call(this,e,t,s),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+s)}}),l.Decryptor=l.extend({processBlock:function(e,t){var n=this._cipher,s=n.blockSize,r=e.slice(t,t+s);n.decryptBlock(e,t),c.call(this,e,t,s),this._prevBlock=r}}),u=u.CBC=l,l=(m.pad={}).Pkcs7={pad:function(e,t){for(var n,r=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,i=[],a=0;a<n;a+=4)i.push(r);n=s.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:u,padding:l}),reset:function(){o.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),_=(u=(m.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t=(e=i.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=s.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(e,t,n,s){s=this.cfg.extend(s);var r=e.createEncryptor(n,s);return t=r.finalize(t),r=r.cfg,d.create({ciphertext:t,key:n,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,n,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),e.createDecryptor(n,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),m=(m.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=s.random(8)),e=a.create({keySize:t+n}).compute(e,r),n=s.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},p=t.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:m}),encrypt:function(e,t,n,s){return n=(s=this.cfg.extend(s)).kdf.execute(n,e.keySize,e.ivSize),s.iv=n.iv,(e=_.encrypt.call(this,e,t,n.key,s)).mixIn(n),e},decrypt:function(e,t,n,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),n=s.kdf.execute(n,e.keySize,e.ivSize,t.salt),s.iv=n.iv,_.decrypt.call(this,e,t,n.key,s)}})}(),function(){for(var e=Ke,t=e.lib.BlockCipher,n=e.algo,s=[],r=[],i=[],a=[],o=[],u=[],c=[],l=[],d=[],_=[],m=[],p=0;256>p;p++)m[p]=128>p?p<<1:p<<1^283;var h=0,g=0;for(p=0;256>p;p++){var w=(w=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&w^99;s[h]=w,r[w]=h;var f=m[h],q=m[f],b=m[q],y=257*m[w]^16843008*w;i[h]=y<<24|y>>>8,a[h]=y<<16|y>>>16,o[h]=y<<8|y>>>24,u[h]=y,y=16843009*b^65537*q^257*f^16843008*h,c[w]=y<<24|y>>>8,l[w]=y<<16|y>>>16,d[w]=y<<8|y>>>24,_[w]=y,h?(h=f^m[m[m[b^f]]],g^=m[m[g]]):h=g=1}var v=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),r=this._keySchedule=[],i=0;i<n;i++)if(i<t)r[i]=e[i];else{var a=r[i-1];i%t?6<t&&4==i%t&&(a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[255&a]):(a=s[(a=a<<8|a>>>24)>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[255&a],a^=v[i/t|0]<<24),r[i]=r[i-t]^a}for(e=this._invKeySchedule=[],t=0;t<n;t++)i=n-t,a=t%4?r[i]:r[i-4],e[t]=4>t||4>=i?a:c[s[a>>>24]]^l[s[a>>>16&255]]^d[s[a>>>8&255]]^_[s[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,a,o,u,s)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,l,d,_,r),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,s,r,i,a,o){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],d=e[t+2]^n[2],_=e[t+3]^n[3],m=4,p=1;p<u;p++){var h=s[c>>>24]^r[l>>>16&255]^i[d>>>8&255]^a[255&_]^n[m++],g=s[l>>>24]^r[d>>>16&255]^i[_>>>8&255]^a[255&c]^n[m++],w=s[d>>>24]^r[_>>>16&255]^i[c>>>8&255]^a[255&l]^n[m++];_=s[_>>>24]^r[c>>>16&255]^i[l>>>8&255]^a[255&d]^n[m++],c=h,l=g,d=w}h=(o[c>>>24]<<24|o[l>>>16&255]<<16|o[d>>>8&255]<<8|o[255&_])^n[m++],g=(o[l>>>24]<<24|o[d>>>16&255]<<16|o[_>>>8&255]<<8|o[255&c])^n[m++],w=(o[d>>>24]<<24|o[_>>>16&255]<<16|o[c>>>8&255]<<8|o[255&l])^n[m++],_=(o[_>>>24]<<24|o[c>>>16&255]<<16|o[l>>>8&255]<<8|o[255&d])^n[m++],e[t]=h,e[t+1]=g,e[t+2]=w,e[t+3]=_},keySize:8}),e.AES=t._createHelper(n)}();const Ve=Ke,Ge={stringify:function(e){var t={ct:e.ciphertext.toString(Ve.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t).replace(/\s/g,"")},parse:function(e){var t=JSON.parse(e),n=Ve.lib.CipherParams.create({ciphertext:Ve.enc.Base64.parse(t.ct)});return t.iv&&(n.iv=Ve.enc.Hex.parse(t.iv)),t.s&&(n.salt=Ve.enc.Hex.parse(t.s)),n}},Ze=e=>{let t="";if(!e.type)return"";switch(e.type){case"truefalse":t=e.correct?window.wplms_course_data.translations.true:window.wplms_course_data.translations.false;break;case"single":case"survey":t=e.options[parseInt(e.correct)-1];break;case"multiple":if(t="",(n=e.correct.split(",")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"sort":case"match":if(t="",(n=e.correct.split(",")).length)for(let s=0;s<n.length;s++)t+=e.original_options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"select":if(t="",(n=e.correct.split("|")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"fillblank":case"text":case"largetext":case"smalltext":var n;if(t="",(n=e.correct.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"")}return t};function et(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}const tt=(e,t=null,n=null,s=null,r=!0)=>{s&&(s=parseFloat(s)),n||(s=null);let i=0,a=[],o=0;e.user_marks=0;let u=0,c=null;et(e.correct)||(c=JSON.parse(Ve.AES.decrypt(e.correct,e.key,{format:Ge}).toString(Ve.enc.Utf8))),e.correct=c;let l=null;switch(e.hasOwnProperty("marked_answer")&&(l=e.marked_answer),e.type){case"truefalse":e.marked=l,e.correct=parseInt(c),l==c?(e.user_marks=e.marks,i=1):e.user_marks=0,a.push(c);break;case"single":e.marked=l,l==c-1?(e.user_marks=e.marks,i=1):e.user_marks=0,a.push(c-1);break;case"multiple":et(l)&&(l=[]);var d=l;e.marked=l.join(",").slice();var _=c.split(",");if(a=_,t){if(d.length)for(let e=0;e<d.length;e++){let t=d[e]+1;t=t.toString(),-1!==_.indexOf(t)?o++:u++}i=o/_.length,e.user_marks=Math.round(e.marks*i*100)/100}else if(d.length==_.length)for(let t=0;t<d.length;t++){e.user_marks=e.marks,i=1;let n=d[t]+1;if(n=n.toString(),-1==_.indexOf(n)){e.user_marks=0,i=0;break}}break;case"match":case"sort":et(l)&&(l=[]),e.marked=l.join(",").slice();let n=l,s=c.split(","),r=0;if(n&&n.length){for(let t=0;t<n.length;t++){e.user_marks=e.marks,i=1;let c="";et(n[t])||(c=n[t].toString()),s[t]!=c?(i&&(e.user_marks=0,i=0,r=1),u++):(o++,a.push(t))}t?(i=o/s.length,e.user_marks=Math.round(e.marks*i*100)/100):r&&(e.user_marks=0,i=0)}break;case"fillblank":et(l)&&(l=[]),l.map(((e,t)=>{l[t]=e.toLowerCase(),window.wplms_course_data&&window.wplms_course_data.hasOwnProperty("trim_question_answer")&&window.wplms_course_data.trim_question_answer&&l[t].trim()})),e.marked=l.join("|").slice(),c=c.toLowerCase();let p=c.split("|");if(e.user_marks=0,l.length){e.user_marks=e.marks,i=1;for(let t=0;t<l.length;t++){let n="";et(l[t])||(n=l[t].toString());let s=[];et(p[t])||Array.isArray(p[t])||(s=p[t].split(",")),-1==s.indexOf(n)?(i&&(e.user_marks=0,i=0),u++):(o++,a.push(t))}t?(i=o/p.length,e.user_marks=Math.round(e.marks*i*100)/100):l.length!==p.length&&(e.user_marks=0,i=0)}break;case"select":et(l)&&(l=[]),e.marked=l.join("|").slice();let h=c.split("|");if(e.user_marks=0,l&&l.length){e.user_marks=e.marks,i=1;for(let t=0;t<l.length;t++){let n="";n=(parseInt(l[t])+1).toString(),n!=h[t]?(i&&(e.user_marks=0,i=0),u++):(o++,a.push(t))}t?(i=o/h.length,e.user_marks=Math.round(e.marks*i*100)/100):l.length!==h.length&&(e.user_marks=0,i=0)}break;case"smalltext":case"largetext":let g=c.split(",");if(e.marked=l,l&&g&&g.length)for(var m=0;m<g.length;m++)l.toLowerCase()==g[m].toLowerCase()&&(e.user_marks=e.marks,i=1);else e.user_marks=0}if(!et(l)&&s&&(t&&u>0?e.user_marks=e.user_marks-u*s:i||(e.user_marks=e.user_marks-s)),e.auto||r||(e.user_marks=0,e.show_correct_answer=0),a&&a.length)for(m=a.length-1;m>=0;m--)"multiple"==e.type?a[m]=parseInt(a[m]-1):a[m]=parseInt(a[m]);return e.correct_indexes=a,e.auto&&(e.usercorrect=i,e.attempted=!0),e.marked=(e=>{let t="";if(!e.type)return t;if(!e.marked||"undefined"==e.marked)return t;switch(e.type){case"truefalse":case"single":case"survey":t=e.options[parseInt(e.marked)];break;case"multiple":if(t="",(n=e.marked.split(",")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])]+(s+1<n.length?" , ":"");break;case"sort":case"match":if((n=e.marked.split(",")).length)for(let s=0;s<n.length;s++)"undefined"!==e.original_options[parseInt(n[s])-1]&&null!=e.original_options[parseInt(n[s])-1]&&""!=e.original_options[parseInt(n[s])-1]||(e.original_options[parseInt(n[s])-1]="____"),t+=e.original_options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"select":if(t="",(n=e.marked.split("|")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])]+(s+1<n.length?" , ":"");break;case"fillblank":case"text":var n;if(t="",(n=e.marked.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"");break;case"largetext":case"smalltext":t=e.marked}return t})(e),e.correct=Ze(e),e},{createElement:nt,render:st,useState:rt,useEffect:it,Fragment:at,RawHTML:ot}=wp.element,ut=e=>{const[t,n]=rt({}),[s,r]=rt(!1);it((()=>{n(e.question),setTimeout((()=>{r(!0)}),200)}),[]);let i="incorrect",a="checked_answer incorrect";return t.hasOwnProperty("user_marks")&&t.user_marks&&parseFloat(t.user_marks)>0&&(i="correct",a="checked_answer correct"),nt(at,null,t.show_correct_answer&&void 0!==t.correct&&t.correct.length?nt("div",{className:a},nt("strong",null,window.wplms_course_data.translations.correct_answer,nt(ot,null,t.correct))):"",nt("div",{className:s?"question_wrapper loaded":"question_wrapper"},nt("div",{className:"result"},nt("div",{className:i},nt("span",null),nt("strong",null,t.user_marks)))))},{createElement:ct,render:lt,useState:dt,useEffect:_t,Fragment:mt}=wp.element,{createElement:pt,render:ht,useState:gt,useEffect:wt,Fragment:ft}=wp.element,qt=e=>{const[t,n]=gt({}),[s,r]=gt([]);wt((()=>{n(e.quiz),r(e.currentQuestions)}),[e.quiz,e.currentQuestions]);let i=[];if(t.hasOwnProperty("meta")&&t.meta.hasOwnProperty("questions")&&t.meta.questions&&t.meta.questions.length&&(i=t.meta.questions),i.length)if(null!==e.filter)switch(e.filter){case"wrong":i=i.filter((e=>!e.hasOwnProperty("user_marks")||!e.user_marks||parseFloat(e.user_marks)<=0));break;case"correct":i=i.filter((e=>e.hasOwnProperty("user_marks")&&e.user_marks&&parseFloat(e.user_marks)>0));break;case"bookmarked":i=i.filter((t=>e.bookMarked.indexOf(t.id)>-1))}else i=t.meta.questions;return pt("div",{className:""},pt("div",{class:t&&t.meta&&t.meta.questions&&t.meta.questions.length>=10?"timeline_wrapper question_numbers":"timeline_wrapper"},pt("ul",null,t&&t.meta&&t.meta.questions&&t.meta.questions.length?i.map(((n,i)=>{let a="";return e.bookMarked.indexOf(n.id)>-1&&(a+=" bookmarked"),("undefined"!=n.marked_answer&&null!=n.marked_answer||Array.isArray(n.marked_answer)&&n.marked_answer.length)&&(a+=" done",n.hasOwnProperty("attempted")&&n.attempted&&(n.hasOwnProperty("user_marks")&&n.user_marks&&parseFloat(n.user_marks)>0?a+=" correct":a+=" incorrect")),-1!==s.indexOf(i)&&(a+=" active"),pt("li",{className:a,"data-number":window.wplms_course_data.translations.question_prefix+(i+1)},pt("span",{onClick:n=>{((n,i,a)=>{n.preventDefault();let o=[...s],u=[];if(t.question_number&&"undefined"!=t.question_number&&t.question_number>0){if(-1!==o.indexOf(a))return;let e=Math.ceil((a+1)/t.question_number),n=e*t.question_number-t.question_number,s=e*t.question_number;for(let e=n;e<s;e++)u.push(e);r(u)}e.update(u,"show")})(n,0,i)}},n.marks))})):"",t&&t.meta&&t.meta.questions&&t.meta.questions.length?pt("span",{className:"hide_questions",onClick:e.hideQuestions},pt("span",{class:"vicon vicon-angle-double-left"}),pt("span",null,window.wplms_course_data.translations.hide_questions)):"")))},{createElement:bt,render:yt,useState:vt,useEffect:kt,Fragment:xt}=wp.element,{createElement:zt,render:Nt,useState:St,useEffect:Ot,Fragment:Et}=wp.element,Pt=e=>{const[t,n]=St({}),[s,r]=St([]),[i,a]=St(1);Ot((()=>{if(n(e.quiz),r(e.currentQuestions),e.currentQuestions.length){let t=Math.ceil((e.currentQuestions[0]+1)/e.quiz.question_number);a(t)}const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js",t.async=!0,t.onload=()=>{document.dispatchEvent(new Event("VibeBP_Editor_Content"))},document.body.appendChild(t)}),[e.quiz,e.currentQuestions]),Ot((()=>{n(e.quiz),o(null,1)}),[e.filter]),Ot((()=>{"bookmarked"==e.filter&&e.questions.length&&s.length&&e.questions.length<=s[s.length-1]&&o(null,e.questions.length)}),[e.bookMarked]);const o=(n,s)=>{if(n&&n.preventDefault(),i===s)return;let o=[],u=s*t.question_number-t.question_number,c=s*t.question_number;for(let e=u;e<c;e++)o.push(e);r(o),e.update(o,"show"),a(s)},u=(n=null,a)=>{n&&n.preventDefault();let o=[...s],u=[];if(t.question_number&&"undefined"!=t.question_number&&t.question_number>0)if(a>0){let n;n=t.question_number+o[o.length]>e.questions.length?e.questions.length:o[o.length-1]+t.question_number+1;for(let e=o[o.length-1]+1;e<n;e++)u.push(e);let s=i;s++,r(u)}else{for(let e=o[0]-1;e>=o[0]-t.question_number;e--)u.unshift(e);let e=i;e--,r(u)}e.update(u,"show")};return t&&t.meta&&e.questions&&e.questions.length?zt("div",{class:"quiz_pagination_wrapper buttons has-addons"},e.questions[s[0]-1]&&"undefined"!=e.questions[s[0]-1]?zt("span",{href:"#",className:"button ques_link left prevq",onClick:e=>{u(e,-1)}},zt("i",{className:"vicon vicon-angle-left","aria-hidden":"true"})):zt("span",{href:"#",className:"button ques_link left prevq faded"},zt("i",{className:"vicon vicon-angle-left","aria-hidden":"true"})),(()=>{let n=Math.ceil(e.questions.length/t.question_number),s=n,r=[],a=0;if(n>1)for(;n;)if(n){let e=n;i==e?r.unshift(zt("span",{className:"button active",onClick:t=>{o(t,e)}},n)):(i-1>=1||i+1<=s)&&(i-1==e||i+1==e||1==e||e==s?r.unshift(zt("span",{className:"button",onClick:t=>{o(t,e)}},n)):a<2&&(r.unshift(zt("span",{className:"button"},"...")),a++)),n--}return r})(),e.questions[s[s.length-1]+1]&&"undefined"!=e.questions[s[s.length-1]+1]?zt("span",{href:"#",className:"button ques_link right nextq",onClick:e=>{u(e,1)}},zt("i",{className:"vicon vicon-angle-right","aria-hidden":"true"})):zt("span",{href:"#",className:"button ques_link right nextq faded"},zt("i",{className:"vicon vicon-angle-right","aria-hidden":"true"}))):""},{createElement:It,render:Ct,useState:Mt,useEffect:Ft,Fragment:Dt,RawHTML:Bt}=wp.element,Tt=e=>It(Dt,null,e.active?It("div",{className:"confirmpopup_wrapper"},It("div",{className:"confirmpopup_content"},It("div",{dangerouslySetInnerHTML:{__html:e.content}}),It("div",{className:"buttons_wrapper"},It("span",{className:"button",onClick:t=>{e.yesfunction,e.update(e.type,"trigger")}},e.yes),It("span",{className:"button",onClick:t=>{e.update(e.type,"nottrigger")}},e.no)))):""),{createElement:At,render:Lt,useState:Ht,useEffect:jt,Fragment:Rt}=wp.element;function Jt(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}const $t=e=>{const[t,n]=Ht(e.quiz),[s,r]=Ht(!1),[i,a]=Ht(""),[o,u]=Ht({}),[c,l]=Ht({});return jt((()=>{let t=0,n=0,s=0,r=0;if(e.quiz&&e.quiz.meta&&e.quiz.meta.questions&&(e.quiz.meta.questions.map(((e,i)=>{e.hasOwnProperty("usercorrect")&&e.hasOwnProperty("marked_answer")&&!Jt(e.marked_answer)?parseInt(e.usercorrect)>0?t++:n++:s++,r++})),l({correct:t,incorrect:n,ommitted:s}),""!=i)){let e={datasets:[{data:[t,n,s],backgroundColor:["#82c362","#dc6a6a","#5381ab"]}],labels:[window.wplms_course_data.translations.correct+" ("+t+") ("+Math.round(t/r*100)+"%)",window.wplms_course_data.translations.incorrect+" ("+n+") ("+Math.round(n/r*100)+"%)",window.wplms_course_data.translations.unattempted+" ("+s+") ("+Math.round(s/r*100)+"%)"]},a=new Chart(i,{type:"pie",data:e});u(a)}}),[i]),At("div",{className:"quiz_stats_chart"},t&&t.meta&&t.meta.questions&&t.meta.questions.length&&t.submitted?At(Rt,null,o&&c?At("div",{className:"quiz_stats_chart_pie"},At("canvas",{ref:e=>{e&&""==i&&a(e)}})):"",At("div",{className:"question_stats_content_wrapper"},At("span",{className:"question_stats_content_heading"},window.wplms_course_data.translations.historical),At("div",{className:"question_stats_content"},t.meta.questions.map(((e,t)=>{if(e.hasOwnProperty("correct_data"))return At("div",{className:e.hasOwnProperty("user_marks")&&e.user_marks&&parseFloat(e.user_marks)>0?"checked_answer correct":"checked_answer incorrect"},At("span",null,window.wplms_course_data.translations.q,t+1),At("span",null,e.correct_data,"%"))}))),t.hasOwnProperty("tags_data")&&!Jt(t.tags_data)?At(Rt,null,At("span",{className:"question_stats_content_heading"},window.wplms_course_data.translations.correct_by_tag),At("div",{className:"question_stats_content"},t.tags_data.map((e=>At("div",{className:"checked_answer correct"},At("span",{dangerouslySetInnerHTML:{__html:e.label}}),At("span",null,e.value,"%")))))):"")):"")},{createElement:Ut,render:Xt,useState:Wt,useEffect:Qt,Fragment:Yt}=wp.element,{dispatch:Kt,select:Vt}=wp.data,Gt=e=>{const[t,n]=Wt([]),[s,r]=Wt(null),[i,a]=Wt(!0),[o,u]=Wt(null),[c,l]=Wt(!1);Qt((()=>{let e=Vt("vibebp").getToken();!function(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)?(d(e),r(e)):localforage.getItem("bp_login_token").then((t=>{e=t,d(e),r(e)}))}),[e.quizid]);const d=t=>{fetch(window.wplms_course_data.api_url+"/user/quiz/previousresults/"+e.quizid,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:t})}).then((e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data})).then((e=>{e&&e.length&&n(e),a(!1)})).catch((e=>{a(!1),console.error("Uh oh, an error!",e),Kt("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))};return!i&&t.length?Ut("div",{className:"previous_results_wrapper"},Ut("h3",{className:"subtitle",onClick:()=>{l(!c)}},Ut("span",null,window.wplms_course_data.translations.previous_results)," ",Ut("span",{className:c?"vicon vicon-minus":"vicon vicon-plus"})),c?o&&o.hasOwnProperty("id")?Ut("div",{className:"single_quiz_result quiz_results"},Ut("span",{className:"vicon vicon-arrow-left",onClick:()=>{u(null)}}),Ut(is,{quizid:e.quizid,activity:o.id})):Ut("div",null,t.length?Ut("ul",{className:"quiz_results"},t.map((e=>Ut("li",{className:"result",onClick:()=>{u(e)}},Ut("span",{dangerouslySetInnerHTML:{__html:e.content}}))))):Ut("div",{className:"vbp_message message"},window.wplms_course_data.translations.results_not_available)):""):""},{createElement:Zt,render:en,useState:tn,useEffect:nn,Fragment:sn}=wp.element,rn=e=>e.quiz&&e.quiz.meta&&e.quiz.meta.questions&&e.quiz.meta.questions.length?Zt("div",{className:"course_status"},Zt("div",{className:"incourse"},Zt("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:e.quiz&&e.quiz.content?e.quiz.content:""}}),Zt("div",{className:"quiz_questions_content"},Zt("h1",null,Zt("span",{className:"student_score"},e.quiz.marks+"/"+e.quiz.max_marks),e.quiz.quiz_passing_score?Zt("span",null,e.quiz.marks>e.quiz.quiz_passing_score?window.wplms_course_data.translations.passed:window.wplms_course_data.translations.failed):""),e.quiz.meta.questions.map(((t,n)=>{let s="",r="";return t.hasOwnProperty("show_hint")&&t.show_hint?(r="question_hint_content message show",s="question_hint show"):(r="question_hint_content message",s="question_hint"),Zt("div",{className:"question"},Zt("div",{className:"question_actions"},Zt("span",null,window.wplms_course_data.translations.question_full_prefix," ",n+1),Zt("div",null,Zt("span",{className:"marks"},Zt("i",{className:"vicon vicon-medall"}),t.marks))),e.renderSwitch(t,n),t.attempted&&t.show_correct_answer&&t.explanation.length?Zt(sn,null,Zt("div",{className:"answers"},t.hasOwnProperty("correct")?Zt("div",{className:"correct_answer"},Zt("label",null,window.wplms_course_data.translations.correct_answer),Zt("div",{dangerouslySetInnerHTML:{__html:t.correct}})):"",t.hasOwnProperty("marked")&&t.marked?Zt("div",{className:"marked_answer"},Zt("label",null,window.wplms_course_data.translations.marked_answer),Zt("div",{dangerouslySetInnerHTML:{__html:t.marked}})):""),Zt("div",{className:"explanation"},Zt("strong",null,window.wplms_course_data.translations.question_explanation),Zt("div",{dangerouslySetInnerHTML:{__html:t.explanation}}))):"")})),Zt("style",null,'\n\t:root { --body: #fafafa; --highlight: #fff; --text: #475F7B; --bold: #394C62; --primary: #5A8DEE; --secondary: #475F7B; --success: #39DA8A; --primarycolor: #fff; --sidebar: #f4f4ff; --border: rgba(0,0,0,0.08); --darkborder: rgba(0,0,0,0.3); --blue: #5A8DEE; --indigo: #6610F2; --purple: #6F42C1; --pink: #E83E8C; --red: #FF5B5C; --orange: #FD7E14; --yellow: #FDAC41; --green: #39DA8A; --cyan: #00CFDD; --white: #FFFFFF; --gray: #475F7B; --gray-dark: #394C62; --info: #00CFDD; --warning: #FDAC41; --danger: #FF5B5C; --light: #A3AFBD; --dark: #394C62; --error: #ffe27e; --errortext: #725906; --shadow: rgba(0,0,0,0.2); } \n\t.correct_answer { margin-bottom: 1rem;border-bottom:1px solid rgba(0,0,0,0.1); } \n\t.course_status .incourse > * { margin: 0.5rem; } .course_status .incourse .quiz_pagination_wrapper { margin: 1.5rem 0; } .course_status .incourse .quiz_pagination_wrapper .buttons { align-items: center; display: flex; flex-wrap: wrap; justify-content: flex-start; } .course_status .incourse .quiz_pagination_wrapper .question .button { width: auto !important; display: inline-block !important; height: auto !important; } .course_status .incourse .quiz_pagination_wrapper > .button { background: var(--highlight) !important; color: var(--bold) !important; border: 1px solid var(--border) !important; min-width: auto !important; margin: 0; text-align: center; border-radius: 0; padding: 12px 0; width: 48px !important; } .course_status .incourse .quiz_pagination_wrapper > .button.right { float: none; } .course_status .incourse .quiz_pagination_wrapper > .button.active { background: var(--primary) !important; color: var(--primarycolor) !important; } .course_status .incourse .quiz_pagination_wrapper > .button.ques_link { min-with: auto !important; } .course_status .incourse .quiz_stats_chart { display: flex; flex-direction: row; flex-wrap: wrap; } .course_status .incourse .quiz_stats_chart .quiz_stats_chart_pie { width: 340px; } .course_status .incourse .quiz_stats_chart .question_stats_content_wrapper { width: calc(100% - 340px); margin-bottom: 1rem; } .course_status .incourse .quiz_stats_chart span.question_stats_content_heading { margin-bottom: 1rem; display: inline-block; } .course_status .incourse .quiz_stats_chart span.question_stats_content_heading:not(:nth-child(1)) { margin-top: 1.5rem; } .course_status .incourse .quiz_stats_chart .question_stats_content { display: flex; flex-wrap: wrap; margin: 0 -5px; } .course_status .incourse .quiz_stats_chart .question_stats_content > * { margin: 5px; } .course_status .incourse .question_wrapper { min-height: 100px; position: absolute; overflow: hidden; left: 0; top: 0; width: 100%; height: 100%; z-index: 99; text-align: center; transition: all 200ms ease-in; } .course_status .incourse .question_wrapper.loaded .result { transform: translateX(40%); } .course_status .incourse .question_wrapper.loaded .result .correct > span, .course_status .incourse .question_wrapper.loaded .result .incorrect > span { transform: scale(1); } .course_status .incourse .question_wrapper .fillblank_area { clear: none; display: inline-block; } .course_status .incourse .question_wrapper .result { transition: all 200ms ease-in; } .course_status .incourse .question_wrapper .incorrect, .course_status .incourse .question_wrapper .correct { display: inline-block; margin-top: 15px; padding: 10px; } .course_status .incourse .question_wrapper .incorrect strong { color: #ef614d; font-size: 48px; line-height: 64px; margin: 0 10px; font-weight: 600; } .course_status .incourse .question_wrapper .incorrect > span { background: #ef614d; } .course_status .incourse .question_wrapper .incorrect > span:before { content: "e646"; font-family: vicon; color: #fff; font-weight: 900; position: absolute; font-size: 3rem; top: 50%; left: 50%; transform: translate(-50%, -50%); } .course_status .incourse .question_wrapper .correct strong { font-size: 48px; line-height: 64px; margin: 0 10px; font-weight: 600; color: #75b733; } .course_status .incourse .question_wrapper .correct > span:before { content: "e64c"; font-family: vicon; color: #fff; font-weight: 900; position: absolute; font-size: 3rem; top: 50%; left: 50%; transform: translate(-50%, -50%); } .course_status .incourse .question_wrapper span { position: relative; width: 64px; height: 64px; float: left; border-radius: 50%; background: #75b733; display: block; padding: 30px; transform: scale(15); transition: all 200ms ease-in-out; } .course_status .incourse .question_wrapper span .correct > span:before { font-family: fonticon; top: 18px; left: 18px; content: "e038"; color: #FFF; font-size: 30px; line-height: 1; position: absolute; } .course_status .incourse .checked_answer { margin: 2.5rem 0 0; padding: 1rem; font-size: 1.2rem; color: var(--bold); border: 1px solid var(--border); background-color: var(--sidebar); border-radius: 2px; } .course_status .incourse .checked_answer.incorrect { background: #d8eec2; } .course_status .incourse .checked_answer.correct { background: #d8eec2; } .course_status .incourse .checked_answer span { white-space: nowrap; } .course_status .incourse .quiztimer { display: grid; justify-items: center; align-items: center; } .course_status .incourse .quiztimer .circle_timer { display: flex; flex-direction: row; } .course_status .incourse .quiztimer .circle_timer > span { display: flex; justify-content: center; flex-direction: column; } .course_status .incourse .quiztimer .circle_timer .react-progress-circle { display: flex; } .course_status .incourse .quiztimer .timer_amount, .course_status .incourse .quiztimer .timer_unit { color: var(--bold); line-height: 1em; display: grid; grid-template-columns: 1fr 5px 1fr; justify-items: center; } .course_status .incourse .quiztimer .timer_amount span:nth-child(n+4), .course_status .incourse .quiztimer .timer_amount span:nth-child(n+4), .course_status .incourse .quiztimer .timer_unit span:nth-child(n+4), .course_status .incourse .quiztimer .timer_unit span:nth-child(n+4) { display: none; } .course_status .incourse .quiztimer .timer_amount { font-size: 2rem; } .course_status .incourse .quiztimer .timer_amount span { margin: 0 5px; } .course_status .incourse .quiztimer .timer_unit { font-size: 11px; } .course_status .incourse .fillblank_area { clear: none; display: inline-block; } .course_status .incourse span.select_question_content { display: inline-block; } .course_status .incourse .question_content select { margin: 0 5px; } .course_status .incourse .droppable > div { border: 1px solid var(--border); padding: 1rem; cursor: move; } .course_status .incourse .droppable:hover > div { border-color: var(--primary); } .course_status .incourse .droppable.active { overflow-y: scroll; } .course_status .incourse .question .droppable, .course_status .incourse .match_options { touch-action: none; } .course_status .incourse .droppable > div + div { border-top: none; } .course_status .incourse .droppable .dragging { border: 1px solid #f5d01a; box-shadow: 0 0 6px #efc600; } .course_status .incourse .quiz_questions_content .question_actions { margin-top: 1rem; display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between; align-items: center; font-size: 1.5rem; } .course_status .incourse .quiz_questions_content .question_actions span.button { cursor: pointer; padding: 0.2rem; font-size: 1.2rem; margin: 0; } .course_status .incourse .quiz_questions_content .question_actions > div { display: flex; flex-direction: row; } .course_status .incourse .quiz_questions_content .question_actions > div span { margin: 0 0.2rem; z-index: 11; } .course_status .incourse .quiz_questions_content .question_actions > div span:not(.marks) { cursor: pointer; } .course_status .incourse .quiz_questions_content .question .marks i.icon-check-5:before { content: "e63a"; font-family: vicon; font-weight: 400 !important; font-variant: normal !important; text-transform: none !important; speak: none; line-height: 1; margin: 5px; } .course_status .incourse .question .question_option p { display: inline-block; } .course_status .incourse .question_option { display: block; margin-bottom: 1rem; } .course_status .incourse .question_option label { margin-bottom: 0; } .course_status .incourse .question_option.radio + .radio { margin-left: 0; } .course_status .incourse .match_playground { display: grid; grid-template-columns: 1fr 1fr; justify-content: center; align-items: stretch; grid-gap: 1rem; margin: 1rem 0; } .course_status .incourse .match_playground .droppable { border: 1px solid rgba(0, 0, 0, 0.2); } .course_status .incourse .match_playground .match_options .match_option { border: 1px solid rgba(0, 0, 0, 0.08); padding: 2rem; } .course_status .incourse .match_playground .droppable { display: grid; grid-template-columns: 1fr; grid-gap: 10px; padding: 30px; justify-content: center; align-items: center; } .course_status .incourse .match_playground .droppable > div { border-top: 1px solid var(--border); } .course_status .incourse .match_playground .match_option { background: var(--border); } .course_status .incourse .match_playground .match_option .children > div { border: 1px solid var(--border); padding: 1rem; background: var(--highlight); } .course_status .incourse .quiz_questions_content { flex: 3 0 480px; max-width: 100%; } .course_status .incourse .quiz_questions_content .question_content { padding: 1rem 0; border-top: none; } .course_status .incourse .quiz_questions_content .question { position: relative; border-bottom: 1px solid rgba(0,0,0,0.1); } .course_status .incourse .quiz_questions_content .question .question_hint { cursor: pointer; margin-right: 5px; } .course_status .incourse .quiz_questions_content .question .question_hint:before { content: "e718"; font-family: vicon; font-size: 22px; } .course_status .incourse .quiz_questions_content .question .question_hint.show:before { content: "e646"; } .course_status .incourse .quiz_questions_content .question .question_hint span.question_hint_content { transform: scale(0); padding: 1rem; background: var(--sidebar); border-radius: 5px; margin: 1rem 0; opacity: 0; transition: 0.2s all; } .course_status .incourse .quiz_questions_content .question .question_hint span.question_hint_content.show { transform: scale(1); opacity: 1; } .course_status .incourse .quiz_questions_content .question .explanation { /* padding: 1rem; */ /* font-size: 1.2rem; */ border: 1px solid var(--border); background: var(--highlight); z-index: 99; position: relative; margin: 1rem 0; } .course_status .incourse .quiz_questions_content .question_wrapper.loaded .result { transform: translate(0, -24px) scale(0.75); } .course_status .incourse div.sort_options { touch-action: none; } .course_status .incourse .single-quiz .question .question_content:first-child { border-top: none; } .course_status .incourse .quiz_questions li > strong { display: block; margin: 5px 0; } .course_status .incourse .incoursequiz_details { display: flex; flex: 1 0 240px !important; max-width: 100%; flex-direction: column; justify-content: space-between; align-items: baseline; align-items: center; margin-bottom: 1.5rem; flex: 1; z-index: 999; padding: 0.5rem; position: sticky; top: 3rem; background: var(--highlight); bordeR: 1px solid var(--border); border-radius: 5px; align-items: center; transition: 0.5s all; margin: 1rem 0; } .course_status .incourse .incoursequiz_details > div { display: flex; flex-wrap: wrap; justify-content: space-between; margin: 0 -0.5rem; align-items: center; width: 100%; } .course_status .incourse .incoursequiz_details > div > * { margin: 0.5rem; } .course_status .incourse .incoursequiz_details > div strong { flex: 1; } .course_status .incourse .incoursequiz_details > div strong .student_score { font-size: 1.8rem; } .course_status .incourse .incoursequiz_details > div strong .student_quiz_status { opacity: 0.7; font-size: 75%; margin: 0 0.75rem; } .course_status .incourse .incoursequiz_details > div .show_questions { display: flex; align-items: center; } .course_status .incourse .incoursequiz_details > div .show_questions > span:not(.vicon) { font-size: 11px; opacity: 0.5; text-transform: uppercase; } .course_status .incourse .incoursequiz_details .incourse_quiz_button > a { flex: 1; margin: 0 1rem; } .course_status .incourse .incoursequiz_details .quiz_timeline { min-width: 160px; margin: 0; padding: 0; max-height: none; overflow: hidden; } .course_status .incourse .incoursequiz_details .quiz_timeline li.done > span { display: flex; align-items: center; flex-direction: row-reverse; } .course_status .incourse .incoursequiz_details .quiz_timeline li.done > span:before { position: relative; color: var(--primary); } .course_status .incourse .incoursequiz_details .quiz_timeline li.done.active > span:before { color: var(--primarycolor); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper { border: none; justify-content: center; align-items: center; display: flex; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul { display: flex; flex-wrap: wrap; margin: -0.25rem; font-size: 0.8rem; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li { margin: 0.25rem; padding: 5px; border-radius: 2px; border: none; display: flex; width: 32px; height: 24px; align-items: center; border: 1px solid var(--border); cursor: pointer; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.bookmarked { box-shadow: 0 2px 2px var(--shadow); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done { background: var(--border); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done > span:before { content: "e64c"; font-family: vicon; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done.correct { color: #fff; background: rgba(0, 128, 0, 0.5); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done.incorrect { color: #fff; background: rgba(255, 0, 0, 0.5); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done.incorrect > span:before { content: "e646"; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.active { background: var(--primary); color: var(--primarycolor); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li > span { position: relative; width: 100%; text-align: center; margin: 0; height: auto; background: none; border-radius: 0; bordeR: none; top: auto; left: auto; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul > span { display: flex; align-items: center; margin: 0 0.5rem; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul > span > span:not(.vicon) { font-size: 11px; opacity: 0.5; text-transform: uppercase; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper.question_numbers ul > li { width: auto !important; white-space: nowrap; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper.question_numbers ul > li:before { content: attr(data-number); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper.question_numbers ul > li > span { padding: 0 5px; background: var(--border); margin: -2px -2px -2px 5px; border-radius: 2px; } .course_status .incourse span.question_hint_content { transform: scale(0); padding: 1rem; background: var(--sidebar); border-radius: 5px; margin: 1rem 0; opacity: 0; transition: 0.2s all; } .course_status .incourse span.question_hint_content.show { transform: scale(1); opacity: 1; } .course_status .incourse .question_option .radio > input[type=radio] + label, .course_status .incourse .question_option .checkbox > input[type=radio] + label { display: flex; align-items: center; } .course_status .incourse div#unit.quiz_title h1 { width: 50%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } .course_status .incourse div#unit.quiz_title h5 { font-size: 14px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } .course_status .incourse .loading_quiz.disabled { display: none; } .course_status .incourse .loading_quiz { position: fixed !important; width: 0%; height: 0%; left: 50%; top: 50%; z-index: 9999; } .course_status .incourse .question_correct { border: 2px solid rgba(0, 128, 0, 0.5) !important; padding: 5px; border-radius: 5px; } .course_status .incourse .question_incorrect { border: 2px solid rgba(255, 0, 0, 0.5) !important; padding: 5px; border-radius: 5px; } .course_status .incourse .quiz_questions_content { flex: 3 0 640px; max-width: 100%; } .course_status .incourse .quiz_questions_content .question_option.radio label > div, .course_status .incourse .quiz_questions_content .question_option.checkbox label > div { display: inline-block; } .course_status .incourse .quiz_questions_content .question_option.radio label > div > p, .course_status .incourse .quiz_questions_content .question_option.checkbox label > div > p { margin: 0; } .course_status .incourse .incourse_quiz_button { display: flex; flex-direction: column; justify-content: space-around; align-items: center; } .course_status .incourse .incourse_quiz_button a { text-align: center; width: 100%; margin: 0.25rem !important; } .course_status .incourse .quiz_retake { display: flex; align-items: center; flex-wrap: wrap; margin: 0 -0.25rem; } .course_status .incourse .quiz_retake > * { flex: 1 0 180px; margin: 0.25rem; } .course_status .incourse .confirmpopup_wrapper { position: fixed; top: 0; left: 0; height: 100vh; width: 100vw; background: rgba(0, 0, 0, 0.5); z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; } .course_status .incourse .confirmpopup_wrapper .confirmpopup_content { padding: 1rem; background: var(--highlight); border-radius: 5px; min-width: 50%; } .course_status .incourse span.question_stats_content_heading { margin-bottom: 1rem; display: inline-block; } .course_status .incourse span.question_stats_content_heading:not(:nth-child(1)) { margin-top: 1.5rem; } .course_status .incourse .question_stats_content .checked_answer span { text-transform: capitalize; } .course_status .incourse .question_stats_content { display: flex; flex-wrap: wrap; margin: 0 -5px; align-items: start; } .course_status .incourse .question_stats_content > * { margin: 5px; } .course_status .incourse .question_stats_content span { margin: 5px; } .course_status .incourse .question_stats_content .checked_answer { text-align: center; } .course_status .incourse .quiz_stats_chart { display: flex; flex-direction: row; flex-wrap: wrap; } .course_status .incourse .quiz_stats_chart .quiz_stats_chart_pie { flex: 1 0 240px; } .course_status .incourse .quiz_stats_chart .question_stats_content_wrapper { flex: 2 0 480px; } .course_content_content { display: inline-block; width: 100%; padding: 0.75rem 1rem 0; } .course_content_content h2 { font-size: 2.5rem; font-weight: 800; margin: 0 0 1.5rem !important; } .course_content_content .video_wrapper { z-index: 11; } .course_content_content .unit_attachments { background: var(--border); padding: 1rem; margin: 1rem 0; border-radius: 5px; display: flex; flex-direction: column; } .course_content_content .unit_attachments h3 { font-weight: 600; margin-bottom: 0.5rem; } .course_content_content .unit_attachments .attachment { width: 100%; display: flex; flex-direction: row; justify-content: space-between; align-items: center; margin: 0.5rem 0; } .course_content_content .unit_attachments .attachment > span { display: flex; align-items: center; margin: 0 -5px; } .course_content_content .unit_attachments .attachment > span span.attachment_icon > svg { width: 32px; fill: var(--text); color: var(--text); } .course_content_content .unit_attachments .attachment > span > * { margin: 0 5px; } .course_content_content .unit_assignments { background: var(--border); padding: 1rem; margin: 1rem 0; border-radius: 5px; display: flex; flex-direction: column; } .course_content_content .unit_assignments h3 { font-weight: 600; margin-bottom: 0.5rem; } .course_content_content .unit_assignments .assignment .assignment_heading { display: flex; justify-content: space-between; padding: 5px 0; } .course_content_content .pratice_questions { margin: 1rem 0; } .course_content_content .pratice_questions .incourse { margin: 1rem 0; background: var(--sidebar); padding: 1rem 1.5rem; border-radius: 8px; } .course_content_content .pratice_questions .incourse .quiz_questions_content { margin: 0; } .finish-course-content { display: flex; flex-direction: column; justify-content: center; text-align: center; padding-top: 60px; } .finish-course-content h1 { font-size: 3rem; } .finish-course-content h2 { font-size: 2.5rem; } .finish-course-content h3 { font-size: 1.8rem; } .finish-course-content .post_completion_message { flex: 1; max-height: calc(100vh - 550px); overflow-y: auto; min-height: 100px; } .finish-course-content .vibe_editor_rich_text { text-align: start; } .finish-course-content .completion_message { font-size: 1.2rem; margin: 1rem 0; } .finish-course-content .awards { display: flex; align-items: baseline; justify-content: center; margin: 1.5rem 0; } .finish-course-content .awards .certificate svg, .finish-course-content .awards .badge img { fill: var(--light); width: 64px; height: 64px; border-radius: 5px; } .finish-course-content .awards > * { margin: 1rem 0.5rem; display: flex; flex-direction: column; justify-content: center; align-items: center; background: #fafafa; padding: 1rem; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); border-radius: 5px; width: 128px; transition: all 0.2s; font-size: 1rem; font-weight: 600; } .finish-course-content .awards > *:hover { box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); transform: translateY(-2px); } .finish-course-content .finished_percentage { display: flex; align-items: center; justify-content: center; margin: 0; position: absolute; top: -90px; right: calc(50% - 90px); } .finish-course-content .finished_percentage > span { width: 180px; height: 180px; font-weight: 800; display: flex; flex-direction: column; line-height: 0; align-items: center; justify-content: center; border-radius: 50%; font-size: 1.6rem; font-weight: 600; color: var(--primarycolor); background: var(--primary); box-shadow: 0 -1px 1rem var(--highlight); } .finish-course-content .finished_percentage > span:before { position: absolute; content: \'\'; width: 100%; height: 100%; border: 10px solid #fff; box-shadow: inset 0 1px 10px rgba(0, 0, 0, 0.4); border-radius: 50%; z-index: 0; } .finish-course-content .finished_percentage > span > span { line-height: 1; font-size: 11px; display: flex; flex-wrap: wrap; letter-spacing: 1px; position: relative; font-weight: 800; font-size: 11px; letter-spacing: 2px; } .finish-course-content .finished_percentage > span > span + span { width: 80%; } .finish-course-content .finished_percentage > span > span strong { font-size: 4rem; color: var(--primarycolor); margin-left: -0.5rem; } .finish-course-content .finished_percentage > span > span strong + span { font-size: 1rem; position: absolute; margin-top: 1rem; right: -1rem; top: 0; } .quiz_bar { background: var(--highlight); padding: 0.5rem; margin: 1rem 0; align-items: center; display: inline-block; width: 100%; } .quiz_pagination_wrapper .faded { opacity: 0.45; } .quiztimer { display: flex; justify-content: center; } .quiztimer .c100.big { font-size: 10rem; } .quiztimer .c100.big > span { font-size: 1.5rem; display: flex; flex-direction: column; line-height: 1.5; } .quiztimer .c100.big > span span.timer_amount, .quiztimer .c100.big > span span.timer_unit { display: flex; align-items: center; justify-content: center; } .quiztimer .c100.big > span span.timer_amount > span + span, .quiztimer .c100.big > span span.timer_unit > span + span { margin-left: 2px; } .quiztimer .c100.big > span > span.timer_unit { font-size: 0.7rem; opacity: 0.5; } .quiztimer .c100.big:after { border: 1px dashed rgba(0, 0, 0, 0.05); } .answers { margin: 0.5rem 0; }\n\t')))):"",{createElement:an,render:on}=wp.element,un=e=>an("div",{class:"lds-ellipsis"},an("div",null),an("div",null),an("div",null),an("div",null)),{Component:cn,createElement:ln,render:dn,useState:_n,useEffect:mn,Fragment:pn}=wp.element,hn=e=>{const[t,n]=_n(e.duration),[s,r]=_n({d:0,h:0,m:0,s:0});mn((()=>{e.start?setTimeout((()=>{let s=t-1;s<=-1?e.update(e.quiz_id,"expired"):s>=0&&(n(s),i())}),1e3):(n(e.duration),i())}),[t,e.start,e.duration]);const i=()=>{let e={...s},n=t;n>86400?(e.d=Math.floor(n/86400),n-=86400*e.d):e.d=0,n>3600?(e.h=Math.floor(n/3600),n-=3600*e.h):e.h=0,n>60?(e.m=Math.floor(n/60),n-=60*e.m):e.m=0,e.s=n,r(e)};return ln("div",{className:"driptimer_wrapper"},ln("div",{className:"driptimer"},ln("span",{className:"timer_amount"},s.d?ln(pn,null,ln("span",null,s.d),ln("span",null,":")):"",s.h?ln(pn,null,ln("span",null,s.h),ln("span",null,":")):"",s.m?ln(pn,null,ln("span",null,s.m),ln("span",null,":")):"",ln("span",null,s.s)),ln("span",{className:"timer_unit"},s.d?ln(pn,null,ln("span",null,window.wplms_course_data.translations.days),ln("span",null)):"",s.h?ln(pn,null,ln("span",null,window.wplms_course_data.translations.hours),ln("span",null)):"",s.m?ln(pn,null,ln("span",null,window.wplms_course_data.translations.minutes),ln("span",null)):"",ln("span",null,window.wplms_course_data.translations.seconds))))},{createElement:gn,render:wn,useState:fn,useEffect:qn,Fragment:bn}=wp.element,{dispatch:yn,select:vn}=wp.data,{createElement:kn,useState:xn,useEffect:zn,Fragment:Nn,render:Sn}=wp.element,{dispatch:On,select:En}=wp.data,Pn=e=>{const[t,n]=xn({});return zn((()=>{let t="",s="";switch(e.type){case"friends":s="user",t=e.id.item_id;break;case"forum":s="forum",t=e.id.item_id;break;case"group":s="group",t=e.id.item_id;break;case"activity":s="user",t=e.id.secondary_item_id;break;case"member":case"name":case"user_tip":case"user":s="user",t=e.id.user_id;break;default:s=e.type,t=e.id.item_id}s||(s="user");let r=En("vibebp").getData(s+"_"+t);r?n(r):localforage.getItem(s+"_"+t).then((r=>{null!==r?(n(JSON.parse(r)),On("vibebp").setData(s+"_"+t,JSON.parse(r))):fetch(`${window.vibebp.api.url}/avatar?id=${s+"_"+t}&client_id=${window.vibebp.settings.client_id}`,{method:"post",body:JSON.stringify({type:e.type,ids:e.id,token:En("vibebp").getToken()})}).then((e=>e.json())).then((e=>{e.hasOwnProperty("avatar")&&(On("vibebp").setData(s+"_"+t,e),localforage.setItem(s+"_"+t,JSON.stringify(e)),n(e))}))}))}),[e.id.item_id,e.id.user_id]),t.hasOwnProperty("avatar")||t.hasOwnProperty("name")?"member"==e.type?React.createElement("span",{className:"vibebp_member"},React.createElement("img",{src:t.avatar,className:"vibebp_avatar",onClick:e.click,alt:t.name,title:t.name}),React.createElement("span",null,t.name)):"group"==e.type?React.createElement("span",{className:"vibebp_group"},React.createElement("img",{src:t.avatar,className:"vibebp_avatar",onClick:e.click,alt:t.name,title:t.name}),React.createElement("span",null,t.name)):"user_tip"==e.type?React.createElement("span",{className:"vibebp_member tip",title:t.name},React.createElement("img",{src:t.avatar,className:"vibebp_avatar",onClick:e.click,alt:t.name,title:t.name})):"name"==e.type||"forum"==e.type?React.createElement("span",null,t.name):React.createElement("img",{src:t.avatar,className:"vibebp_avatar",onClick:e.click,alt:t.name,title:t.name}):""},{createElement:In,render:Cn,useState:Mn,useEffect:Fn,Fragment:Dn,useRef:Bn}=wp.element,Tn=e=>{const[t,n]=Mn(e.leaderboardData),[s,r]=Mn(e.quiz),i=function(e){const t=Bn();return Fn((()=>{t.current=e}),[e]),t.current}(t);Fn((()=>{let t=[...e.leaderboardData];t.sort(((e,t)=>parseFloat(t.marks)-parseFloat(e.marks))),n(t)}),[e.leaderboardData]),Fn((()=>{r(e.quiz)}),[e.quiz]);let a=[];return t&&t.length&&i&&i.length&&t.map(((e,t)=>{let n=i.findIndex((t=>t.id===e.id));a[t]=t>n?"down vicon vicon-arrow-down":t===n?"":"up vicon vicon-arrow-up"})),In("div",{className:"live_contest_quiz_leaderboard"},In("strong",null,window.wplms_course_data.translations.leaderboard),t.length?In("div",{className:"live-leaderboard-list"},In("div",{className:"contest_user contest_table_head"},In("span",null),In("span",null),In("span",null,window.wplms_course_data.translations.marks),In("span",null,window.wplms_course_data.translations.attempted)),t.map(((e,t)=>In("div",{className:"contest_user"},In("span",null,t+1),In("span",{className:"member_info"},In(Pn,{type:"member",id:{user_id:e.id}}),In("span",{className:a[t]})),In("span",null," ",e.marks,"/",s.meta.max),In("span",null," ",e.attempted,"/",s.meta.questions.length))))):In("div",{className:"vbp_message message"},window.wplms_course_data.translations.members_not_found))},{createElement:An,useState:Ln,useEffect:Hn,Fragment:jn,render:Rn,useRef:Jn}=wp.element,{dispatch:$n,select:Un}=wp.data,{createElement:Xn,render:Wn,useState:Qn,useEffect:Yn,useCallback:Kn,useRef:Vn,Fragment:Gn,useLayoutEffect:Zn}=wp.element,{dispatch:es,select:ts}=wp.data;function ns(e){if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function ss(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function rs(e){try{JSON.parse(e)}catch(e){return!1}return!0}const is=e=>{const[t,n]=Qn({}),[s,r]=Qn("quiz"),[i,o]=Qn([]),u=Vn(null),[c,l]=Qn({}),[d,_]=Qn("up"),[m,p]=Qn(!1),[h,g]=Qn(!1),[w,f]=Qn(!1),[b,y]=Qn(!0),[v,k]=Qn(null),[x,z]=Qn(null),[N,S]=Qn([]),[O,E]=Qn([]),[P,I]=Qn(!1),[C,M]=Qn(""),[D,B]=Qn(ts("vibebp").getUser()),[T,A]=Qn([]);Yn((()=>{let t=ts("vibebp").getToken();ss(t)?localforage.getItem("bp_login_token").then((e=>{t=e,L(t),k(t)})):(L(t),k(t)),document.addEventListener("wplms_answer_question_type",(({detail:e})=>{j(e.question,e.index,"changed")})),localforage.getItem("bookmarked_questions_"+e.quizid).then((e=>{e&&e.length&&S(JSON.parse(e))}))}),[e.quizid]),Yn((()=>{e&&e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!v&&t.hasOwnProperty("id")&&(localStorage.setItem("vibequiz_"+t.id,JSON.stringify(t)),document.querySelector(".start_quiz_button")&&document.querySelector(".start_quiz_button").remove()),document.dispatchEvent(new Event("VibeBP_Editor_Content"))}),[t]);const L=(t=null,s=null)=>{t||(t=v),r("quiz");let i={token:t};if(e.hasOwnProperty("activity")&&e.activity&&(i.activity=e.activity),e.hasOwnProperty("course")&&e.course&&(i.course=e.course),e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!t){let s=localStorage.getItem("vibequiz_"+e.quizid),i="";if(void 0!==s&&s){if(i=JSON.parse(s),i){if(z(null),i.hasOwnProperty("drip_message"))n(i);else if(i.meta&&i.meta.questions){let s=0,r=0;if("object"==typeof i.meta.questions&&!Array.isArray(i.meta.questions)){let e=[];Object.keys(i.meta.questions).map((t=>{"object"==typeof i.meta.questions[t]&&(i.meta.questions[t].id=t,e.push(i.meta.questions[t]),e.id=t)})),i.meta.questions=e}i.meta.questions.map(((e,t)=>{if(e.raw)i.meta.questions[t]=e.raw;else{i.meta.questions[t].show=!1;let n=localStorage.getItem(e.id);!ns(n)&&ss(e.marked_answer)&&(rs(n)?i.meta.questions[t].marked_answer=JSON.parse(n):i.meta.questions[t].marked_answer=n)}s+=parseFloat(e.user_marks),r+=parseFloat(e.marks)})),Number.isInteger(s)||(s=s.toFixed(2)),i.marks=s,i.max_marks=r,i.question_number=parseInt(i.question_number);let a=[];if(i.question_number&&i.question_number>0)for(let e=0;e<i.question_number;e++)a.push(e);if(o(a),e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!t){let t=localStorage.getItem("quiz_expiry_"+e.quizid);if(void 0!==t&&t){let e=Math.floor((new Date).getTime()/1e3);e>=parseInt(t)?$(i):i.remaining=parseInt(t)-e}let n=localStorage.getItem("quiz_retakes_"+e.quizid);if(n&&(n=parseInt(n),i.hasOwnProperty("meta")||(i.meta={}),i.meta.hasOwnProperty("retakes"))){let e=parseInt(i.meta.retakes)-n;e<-1&&(e=0),i.meta.retakes=e}}n(i)}var a=document.createEvent("Event");a.initEvent("unit_traverse",!1,!0),document.querySelector(".unit_content")&&document.querySelector(".unit_content")&&document.querySelector(".unit_content").dispatchEvent(a)}else console.log(i);return void r(!1)}}let u=window.wplms_course_data.api_url+"/user/quiz/"+e.quizid;e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!t&&(u=window.wplms_course_data.api_url+"/quiz/nonloggedin/"+e.quizid+"?client_id="+window.wplms_course_data.client_id),e.hasOwnProperty("force")&&e.force&&(u.includes("?client_id")?u+="&force":u+="?force"),s&&!u.includes("force")&&(u.includes("?")?u+="&force":u+="?force"),i.hasOwnProperty("activity")&&i.activity&&(/\?/.test(u)?u+="&activity="+i.activity:u+="?activity="+i.activity),fetch(u,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(i)}).then((e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data})).then((s=>{if(s){if(z(null),s.hasOwnProperty("drip_message"))n(s);else if(s.meta&&s.meta.questions){let t=0,r=0;if("object"==typeof s.meta.questions&&!Array.isArray(s.meta.questions)){let e=[];Object.keys(s.meta.questions).map((t=>{"object"==typeof s.meta.questions[t]&&(s.meta.questions[t].id=t,e.push(s.meta.questions[t]),e.id=t)})),s.meta.questions=e}s.meta.questions.map(((e,n)=>{if(e.raw)s.meta.questions[n]=e.raw;else{s.meta.questions[n].show=!1;let t=localStorage.getItem(e.id);!ns(t)&&ss(e.marked_answer)&&(rs(t)?s.meta.questions[n].marked_answer=JSON.parse(t):s.meta.questions[n].marked_answer=t);try{JSON.parse(e.correct),e.attempted&&(s.meta.questions[n].correct=JSON.parse(Ve.AES.decrypt(e.correct,e.key,{format:Ge}).toString(Ve.enc.Utf8)),s.meta.questions[n].correct=Ze(e))}catch(e){console.log(e)}}t+=parseFloat(e.marks),r+=parseFloat(e.max_marks)})),Number.isInteger(t)||(t=t.toFixed(2)),isNaN(r)||(s.marks=t,s.max_marks=r),s.question_number=parseInt(s.question_number);let i=[];if(s.question_number&&s.question_number>0)for(let e=0;e<s.question_number;e++)i.push(e);o(i);let a=Math.floor((new Date).getTime()/1e3);s.hasOwnProperty("expiry")&&s.expiry>0&&(s.expiry>a?s.remaining=parseInt(s.expiry)-a:s.remaining=0);let u=localStorage.getItem("quiz_retakes_"+e.quizid);if(u&&(u=parseInt(u),s.hasOwnProperty("meta")||(s.meta={}),s.meta.hasOwnProperty("retakes"))){let e=parseInt(s.meta.retakes)-u;e<-1&&(e=0),s.meta.retakes=e}n(s)}s.remaining&&s.remaining<=0&&$(s,t);var i=document.createEvent("Event");i.initEvent("unit_traverse",!1,!0),document.querySelector(".unit_content")&&document.querySelector(".unit_content")&&document.querySelector(".unit_content").dispatchEvent(i);let r={...s};"live_contest"==r.quiz_type&&firebase&&(firebase.database().ref(`quizes/${r.id}/users`).once("value",(e=>{A((t=>{let n=[...t];return e.forEach((e=>{let t=e.val();t&&-1==n.findIndex((t=>t.id==e.key))&&n.push({...t,id:e.key})})),n}))})),firebase.database().ref(`quizes/${r.id}/users`).on("child_changed",(e=>{A((t=>{let n=[...t],s=n.findIndex((t=>t.id==e.key));return s>-1&&n.splice(s,1,{...e.val(),id:e.key}),n}))})),firebase.database().ref(`quizes/${r.id}/users`).on("child_added",(e=>{A((t=>{let n=[...t],s=n.findIndex((t=>t.id==e.key));return s>-1?n.splice(s,1,{...e.val(),id:e.key}):n.push({...e.val(),id:e.key}),n}))})),firebase.database().ref(`quizes/${r.id}/users`).on("child_removed",(e=>{A((t=>{let n=[...t],s=n.findIndex((t=>t.id==e.key));return s>-1&&n.splice(s,1),n}))})))}else console.log(s);r(!1)})).catch((e=>{r(!1),console.error("Uh oh, an error!",e),es("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))},j=(e,s,r)=>{if("changed"==r){let r={...t};r.meta.questions[s]=e,n(r),ss(e.marked_answer)?null==e.marked_answer&&localStorage.removeItem(e.id):"object"==typeof e.marked_answer||Array.isArray(e.marked_answer)?localStorage.setItem(e.id,JSON.stringify(e.marked_answer)):localStorage.setItem(e.id,e.marked_answer)}},R=(e,t)=>{"show"==t&&o(e)},J=()=>{r("start");let s={...t};if(s.start=!0,s.remaining&&s.remaining>0)r(!1),n(s);else{let t={quiz_id:s.id,token:v};if(e.hasOwnProperty("course")&&(t.course=e.course),s.hasOwnProperty("non_logged_in_quiz")&&s.non_logged_in_quiz&&(!v||e.hasOwnProperty("exported")&&e.exported))return r(!1),localStorage.setItem("quiz_expiry_"+s.id,Math.floor((new Date).getTime()/1e3)+s.meta.duration),n(s),void V(s);fetch(window.wplms_course_data.api_url+"/user/quiz/start?post",{method:"POST",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(t)}).then((e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data})).then((e=>{r(!1),n(s),V(s);let t=`${window.wplms_course_data.api_url}/student/quiz`;Y(t),e.hasOwnProperty("message")&&es("vibebp").addNotification({text:e.message})})).catch((e=>{r(!1),console.error("Uh oh, an error!",e),es("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))}},$=(s=null,i=null)=>{S([]),localforage.removeItem("bookmarked_questions_"+e.quizid),s||(s=t),i||ss(v)||(i=v),localStorage.removeItem("quiz_expiry_"+s.id),r("submit");let a={...s},o=0,u=0;if(a.meta&&a.meta.questions&&a.meta.questions.length)for(let e=0;e<a.meta.questions.length;e++)a.meta.questions[e].attempted||(a.meta.questions[e]=tt(a.meta.questions[e],t.partial_marking,t.negative_marking,parseFloat(t.negative_marks),!1)),a.meta.questions[e].content=a.meta.questions[e].original_content,a.meta.questions[e].auto||(a.meta.questions[e].user_marks=0),o+=parseFloat(a.meta.questions[e].user_marks),u+=parseFloat(a.meta.questions[e].marks),localStorage.removeItem(a.meta.questions[e].id),localStorage.removeItem("question_start_time"+a.meta.questions[e].key);if(a.marks=o.toFixed(2),a.max_marks=u,(isNaN(a.max_marks)||a.max_marks<1)&&(a.max_marks=1),(isNaN(a.marks)||a.marks<1)&&(a.marks=0),e.hasOwnProperty("update")&&e.update("update_quiz_marks",{user_marks:a.marks,total_marks:a.max_marks}),a.hasOwnProperty("remaining")&&delete a.remaining,e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz)return a.submitted=!0,a.start=!1,n(a),void(e.hasOwnProperty("update")&&e.update("quizsubmitted"));fetch(window.wplms_course_data.api_url+"/user/submitresult?post",{method:"POST",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({quiz_id:a.id,course_id:a.hasOwnProperty("course_id")?a.course_id:e.hasOwnProperty("course")?e.course:"",results:a.meta.questions,quiz:a,token:i})}).then((e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data})).then((t=>{if(t){if(r(!1),a.submitted=!0,a.start=!1,t.check_results_url&&(a.check_results_url=t.check_results_url),t.hasOwnProperty("retakes")&&void 0!==t.retakes&&(a.hasOwnProperty("meta")&&void 0!==a.meta||(a.meta={}),a.meta.retakes=t.retakes),t.completion_message&&(a.meta.completion_message=t.completion_message),t.retake_html&&(a.retake_html=t.retake_html),a.meta&&a.meta.questions&&a.meta.questions.length&&!ss(t.correct_data))for(let e=0;e<a.meta.questions.length;e++)t.correct_data.hasOwnProperty(a.meta.questions[e].id)&&(a.meta.questions[e].correct_data=t.correct_data[a.meta.questions[e].id]);t.hasOwnProperty("tags_data")&&(a.tags_data=t.tags_data),n(a);var s=document.createEvent("Event");if(s.initEvent("unit_traverse",!1,!0),a.hasOwnProperty("quiz_passing_score")&&a.quiz_passing_score?t.hasOwnProperty("continue")&&t.continue&&e.hasOwnProperty("update")&&e.update("quizsubmitted"):e.hasOwnProperty("update")&&e.update("quizsubmitted"),document.querySelector(".unit_content")&&document.querySelector(".unit_content")){document.querySelector(".unit_content").dispatchEvent(s);var i=new CustomEvent("react_quiz_submitted",{detail:{next_unit:t.next_unit}});document.dispatchEvent(i)}}K(a);let o=window.wplms_course_data.api_url+"/user/quiz/previousresults/"+e.quizid;Y(o,!0);let u=`${window.wplms_course_data.api_url}/student/quiz`;Y(u);let c=`${window.wplms_course_data.api_url}/instructor/stats/${e.quizid}`;Y(c);let l=`${window.wplms_course_data.api_url}/instructor/leaderboard/${e.quizid}`;Y(l),t.hasOwnProperty("message")&&es("vibebp").addNotification({text:t.message})})).catch((e=>{r(!1),console.error("Uh oh, an error!",e),es("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))},U=(e,n)=>{let s=-1;switch(t&&t.hasOwnProperty("meta")&&t.meta&&t.meta.hasOwnProperty("questions")&&(s=t.meta.questions.findIndex((t=>e.hasOwnProperty("key")&&t.key===e.key)),s<0&&(s=n)),e.type){case"smalltext":return Xn(F,{question:e,index:s,update:j});case"single":return Xn(H,{question:e,index:s,update:j,quiz_id:t.id});case"select":return Xn(X,{question:e,index:s,update:j,quiz_id:t.id});case"multiple":return Xn(G,{question:e,index:s,update:j,quiz_id:t.id});case"fillblank":return Xn(le,{question:e,index:s,update:j,quiz_id:t.id});case"sort":return Xn(ve,{question:e,index:s,update:j,quiz_id:t.id});case"match":return Xn(De,{question:e,index:s,update:j,quiz_id:t.id});case"truefalse":return Xn(je,{question:e,index:s,update:j,quiz_id:t.id});case"largetext":return Xn(We,{question:e,index:s,update:j,quiz_id:t.id});default:let n=1e3*Math.random();return document.dispatchEvent(new CustomEvent("wplms_load_question_type",{detail:{question:e,update:j,quiz_id:t.id,index:s,keyref:n}})),Xn("div",{"data-q":e.id,className:e.type,"data-keyref":n})}},W=(e,n)=>{if("trigger"==n)switch(e){case"submit":$(t),g(!1),f(!1);break;case"start":J(),p(!1)}if("nottrigger"==n)switch(e){case"submit":g(!1),f(!1);break;case"start":p(!1)}},Q=(e,s)=>{if("expired"==s&&e.hasOwnProperty("id")&&t?.meta?.questions?.length){let s={...t},r=s.meta.questions.findIndex((t=>t.key===e.key));r>-1&&(s.meta.questions[r].expired=!0,n(s))}},Y=(e,t=null,n=null)=>n&&!navigator.onLine?new Promise(((e,t)=>{t(0)})):"undefined"!=typeof localforage&&window.vibebp.api.sw_enabled&&navigator.onLine?t?localforage.removeItem(e):localforage.iterate((function(t,n,s){e.length&&n.length&&n.includes(e)&&localforage.removeItem(n)})):new Promise((e=>{e(1)})),K=t=>{let n=window.wplms_course_data.api_url+"/user/quiz/"+e.quizid;e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!v&&(n=window.wplms_course_data.api_url+"/quiz/nonloggedin/"+e.quizid+"?client_id="+window.wplms_course_data.client_id),"undefined"!=typeof localforage&&window.vibebp.api.sw_enabled&&localforage.getItem(n).then((e=>{e&&e.length&&(e=JSON.parse(e)).hasOwnProperty("meta")&&(e=t,localforage.setItem(n,JSON.stringify(e)))}))},V=n=>{let s=window.wplms_course_data.api_url+"/user/quiz/"+e.quizid;e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!v&&(s=window.wplms_course_data.api_url+"/quiz/nonloggedin/"+e.quizid+"?client_id="+window.wplms_course_data.client_id),"undefined"!=typeof localforage&&window.vibebp.api.sw_enabled&&localforage.getItem(s).then((e=>{e&&e.length&&(e=JSON.parse(e)).hasOwnProperty("meta")&&(n.expiry=Math.round((new Date).getTime()/1e3)+parseInt(t.meta.duration),e=n,localforage.setItem(s,JSON.stringify(e)))}))};let Z=0;t.meta&&t.meta.duration&&(Z=t.meta.duration),t&&t.remaining&&t.remaining>0&&(Z=t.remaining),t.hasOwnProperty("end_time")&&parseInt(t.end_time)&&parseInt(t.end_time)>(new Date).getTime()&&(parseInt(t.end_time)-(new Date).getTime())/1e3<Z&&(Z=Math.floor((parseInt(t.end_time)-(new Date).getTime())/1e3));let ee="",te="loading_quiz";s||(ee="disabled",te+=" disabled");let ne=window.wplms_course_data.translations.submit_quiz_confirm;if(t.meta&&t.meta.questions){let e=1;t.meta.questions.map((function(t){t.marked_answer||(e=0)})),e||(ne=window.wplms_course_data.translations.unanswered_confirm+ne)}let se=[];if(t.hasOwnProperty("meta")&&t.meta.hasOwnProperty("questions")&&t.meta.questions&&t.meta.questions.length&&(se=[...t.meta.questions]),se.length&&null!==x)switch(x){case"wrong":se=se.filter((e=>!e.hasOwnProperty("user_marks")||!e.user_marks||parseFloat(e.user_marks)<=0));break;case"correct":se=se.filter((e=>e.hasOwnProperty("user_marks")&&e.user_marks&&parseFloat(e.user_marks)>0));break;case"bookmarked":se=se.filter((e=>N.indexOf(e.id)>-1))}return"quiz"!==s?t&&t.hasOwnProperty("drip_message")?Xn(Gn,null,t&&t.hasOwnProperty("drip_time")?Xn(hn,{start:!0,duration:t.drip_time,update:(e,t)=>{"expired"==t&&L(null,!0)},quiz_id:t.id}):"",Xn("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:t&&t.hasOwnProperty("drip_message")?t.drip_message:""}})):Xn(Gn,null,Xn(Tt,{active:h,update:W,type:"submit",content:ne,yes:window.wplms_course_data.translations.yes,no:window.wplms_course_data.translations.no,yesfunction:"submitQuiz"}),ReactDOM.createPortal(Xn(Tt,{active:w,update:W,type:"submit",content:window.wplms_course_data.translations.bookmark_confirm,yes:window.wplms_course_data.translations.yes,no:window.wplms_course_data.translations.no,yesfunction:"submitQuiz"}),document.querySelector("#quiz_popup")),P?ReactDOM.createPortal(Xn("div",{className:"confirmpopup_wrapper"},Xn("div",{className:"confirmpopup_content"},Xn("textarea",{value:P.flagged_feedback,onChange:e=>{let s={...t},r=s.meta.questions.findIndex((e=>parseInt(P.id)===parseInt(e.id)));if(r>-1){s.meta.questions[r].flagged_feedback=e.target.value,n(s);let t={...P};t.flagged_feedback=s.meta.questions[r].flagged_feedback,I(t)}}}),Xn("div",{className:"buttons_wrapper"},Xn("span",{className:O.indexOf(P.id)>-1?"button is-loading":P.flagged?"button flagged":"button flag",onClick:e=>{(()=>{let e=P,s=t.meta.questions.findIndex((e=>parseInt(P.id)===parseInt(e.id)));if(s>-1){if(ss(e.flagged_feedback))return es("vibebp").addNotification({text:window.wplms_course_data.translations.add_feedback_to_flag}),!1;let r=[...O];r.indexOf(e.id)<=-1&&r.push(e.id),E(r),fetch(window.wplms_course_data.api_url+"/user/question/flag/"+e.id+"?post",{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:v,flagged:!0,feedback:e.flagged_feedback})}).then((e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data})).then((i=>{if(i){if(i.status){let i=r.indexOf(e.id);i>-1&&(r.splice(i,1),E(r));let a={...t};a.meta.questions[s].flagged=!0,n(a),M(""),I(!1)}i.message&&es("vibebp").addNotification({icon:"",text:i.message})}})).catch((e=>{console.error("Uh oh, an error!",e),es("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))}})()}},window.wplms_course_data.translations.submit_feedback),Xn("span",{className:"button",onClick:e=>{I(!1)}},window.wplms_course_data.translations.cancel)))),document.querySelector("#quiz_popup")):"",Xn(Tt,{active:m,update:W,type:"start",content:window.wplms_course_data.translations.start_quiz_confirm,yes:window.wplms_course_data.translations.yes,no:window.wplms_course_data.translations.no,yesfunction:"startQuiz"}),Xn("div",{className:"incourse "+(T.length?"leaderboard_contest":"")},Xn("div",{className:te},Xn("div",{id:"ajaxloader",className:ee})),e.hasOwnProperty("activity")?t.submitted?Xn("h3",null,Xn("span",{className:"student_score"},t.meta.auto?t.marks+"/"+t.max_marks:""),t.quiz_passing_score?Xn("span",null,t.marks>t.quiz_passing_score?window.wplms_course_data.translations.passed:window.wplms_course_data.translations.failed):""):"":Xn("div",{className:"up"==d?"incoursequiz_details show_controls":"incoursequiz_details hide_controls",ref:u},Xn("div",{className:"quiz_first_block"},t.submitted?Xn("strong",null,Xn("span",{className:"student_score"},t.meta.auto?t.marks+"/"+t.max_marks:""),t.quiz_passing_score?Xn("span",null,t.marks>t.quiz_passing_score?window.wplms_course_data.translations.passed:window.wplms_course_data.translations.failed):"",Xn("span",{className:"student_quiz_status"},window.wplms_course_data.translations.quiz_submitted)):Xn("div",{className:"quiztimer_wrapper"},t.hasOwnProperty("end_time")&&parseInt(t.end_time)?Xn("div",{className:"end_timer"},Xn("span",null,window.wplms_course_data.translations.ends_in),Xn(q,{duration:Math.floor((t.end_time-(new Date).getTime())/1e3),update:()=>{},quiz_id:t.id,start:!0})):"",t&&t.meta&&t.meta.duration&&parseInt(t.meta.duration)<863913600?Xn(q,{duration:Z,update:(e,n)=>{"expired"==n&&"submit"!==!s&&$(t)},quiz_id:t.id,start:t.start}):Xn("strong",null,window.wplms_course_data.translations.no_time_limit)),t&&t.meta&&t.meta.questions&&t.meta.questions.length&&t.submitted?Xn("div",{className:"buttons has-addons small"},Xn("a",{className:"correct"==x?"button tip end is-focused":"button tip",title:window.wplms_course_data.translations.show_correct_attempts,onClick:()=>{z("correct"!=x?"correct":null)}},Xn("span",{className:"vicon vicon-check"})),Xn("a",{className:"wrong"==x?"button tip end is-focused":"button tip",title:window.wplms_course_data.translations.show_wrong_attempts,onClick:()=>{z("wrong"!=x?"wrong":null)}},Xn("span",{className:"vicon vicon-close"})),t.hasOwnProperty("show_print_results")&&t.show_print_results?Xn("a",{className:"button tip",title:window.wplms_course_data.translations.print_results,onClick:()=>{(async()=>{if(!t.meta.questions.length)return!1;void 0===e.quizid&&(e.quizid=e.quiz.id),document.getElementById("quiz_results_"+e.quizid)&&document.getElementById("quiz_results_"+e.quizid).remove();const n=document.createElement("div");if(n.src=n.src,n.setAttribute("id","quiz_results_"+e.quizid),n.classList.add("quiz_results"),t.hasOwnProperty("title")){let e=document.createElement("meta"),n=document.createElement("meta");e.setAttribute("property","og:title");let s="";t.meta.auto&&(s=t.marks+"/"+t.max_marks),t.quiz_passing_score&&(t.marks>t.quiz_passing_score?s+=" "+window.wplms_course_data.translations.passed:s+=" "+window.wplms_course_data.translations.failed),e.setAttribute("content",s+t.title),e.setAttribute("name","twitter:title"),e.setAttribute("content",s+t.title),document.body.appendChild(e),document.body.appendChild(n)}document.body.appendChild(n),Wn(Xn(rn,{quiz:t,renderSwitch:U}),document.getElementById("quiz_results_"+e.quizid)),await new Promise((e=>setTimeout(e,1e3)));let s=document.getElementById("quiz_results_"+e.quizid).outerHTML;document.getElementById("quiz_results_"+e.quizid)&&document.getElementById("quiz_results_"+e.quizid).remove();var r=window.open("","","height=800, width=1000");r.document.write(s),r.print()})()}},Xn("span",{className:"vicon vicon-printer"})):""):"",t&&t.meta&&t.meta.questions&&t.meta.questions.length&&N.length?Xn("div",{className:"buttons has-addons"},Xn("a",{className:"bookmarked"==x?"button tip end is-focused":"button tip",title:window.wplms_course_data.translations.show_bookmarked,onClick:()=>{z("bookmarked"!=x?"bookmarked":null)}},Xn("span",{className:"vicon vicon-bookmark-alt"}))):"",Xn("span","up"==d?{className:"quiz_detail_toggle vicon button is-primary vicon-arrow-up",onClick:()=>{_("up"==d?"down":"up")}}:{className:"quiz_detail_toggle vicon button is-primary vicon-arrow-down",onClick:()=>{_("up"==d?"down":"up")}})),Xn("div",{className:"quiz_timeline"},!t.submitted||t.meta&&t.meta.retakes>0?Xn("div",{className:"incourse_quiz_button"},t.start||t.submitted?"":t.remaining&&t.remaining>0?Xn("a",{className:"continue_quiz button is-primary",onClick:J},window.wplms_course_data.translations.continue):t&&t.meta&&t.meta.hasOwnProperty("check_access")&&"object"==typeof t.meta.check_access&&t.meta.check_access.hasOwnProperty("status")&&!t.meta.check_access.status?Xn("div",{className:"check_quiz",dangerouslySetInnerHTML:{__html:t.meta.check_access.html}}):t.hasOwnProperty("end_time")&&parseInt(t.end_time)&&parseInt(t.end_time)<=(new Date).getTime()?"":t.hasOwnProperty("start_time")&&t.start_time&&parseInt(t.start_time)>(new Date).getTime()?Xn("div",{className:"start_timer"},Xn("div",null,window.wplms_course_data.translations.starts_in),Xn(q,{duration:Math.floor((parseInt(t.start_time)-(new Date).getTime())/1e3),update:()=>{n({...t,start_time:t.start_time})},quiz_id:t.id,start:!0})):Xn("a",{className:"start"===s?"start_quiz button full is-primary is-loading":"start_quiz  full button is-primary",onClick:()=>{window.wplms_course_data.start_popup?p(!0):J()}},window.wplms_course_data.translations.start),!t.start||t.submitted||e.hasOwnProperty("non_logged_in_quiz")&&(!e.hasOwnProperty("non_logged_in_quiz")||e.non_logged_in_quiz)?"":Xn("a",{className:"save"===s?"save_quiz button is-primary is-loading":"save_quiz button is-primary",onClick:()=>{if(t.meta.questions&&t.meta.questions.length){r("save");let e=[];t.meta.questions.map(((t,n)=>{let s={...t};null==s.marked_answer||"undefined"==s.marked_answer||ss(s.marked_answer)||t.attempted||(s.correct=Ze(s),e.push(s))})),fetch(window.wplms_course_data.api_url+"/user/savequiz?post",{method:"POST",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({quiz_id:t.id,questions:e,token:v})}).then((e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data})).then((e=>{r(!1),e.hasOwnProperty("message")&&es("vibebp").addNotification({text:e.message})})).catch((e=>{r(!1),console.error("Uh oh, an error!",e),es("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))}}},window.wplms_course_data.translations.save_quiz),t.hasOwnProperty("end_time")&&parseInt(t.end_time)&&parseInt(t.end_time)<=(new Date).getTime()||!t.start||t.submitted||t&&t.hasOwnProperty("hide_submit_button")&&t.hide_submit_button&&i&&i.length&&t.hasOwnProperty("meta")&&t.meta&&t.meta.hasOwnProperty("questions")&&t.meta.questions&&t.meta.questions.length&&!(i.indexOf(t.meta.questions.length-1)>-1)?"":Xn("a",{className:"submit"===s?"submit_quiz button is-primary is-loading":"submit_quiz button is-primary",onClick:()=>{window.wplms_course_data.submit_popup?g(!0):N.length?f(!0):$()}},window.wplms_course_data.translations.submit),!t.start&&t.submitted&&t.meta&&t.meta.retakes>0?Xn("div",{className:"quiz_retake"},Xn("a",{className:"retake"===s?"retake_quiz button is-primary is-loading":"retake_quiz button is-primary",onClick:()=>(()=>{t.hasOwnProperty("non_logged_in_quiz")&&t.non_logged_in_quiz&&!v&&localStorage.removeItem("vibequiz_"+t.id),r("retake");let n={token:v};if(e.hasOwnProperty("course")&&(n.course=e.course),e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz){localStorage.removeItem("vibequiz_"+e.quizid);let n=localStorage.getItem("quiz_retakes_"+e.quizid);return n||(n=0),localStorage.setItem("quiz_retakes_"+t.id,parseInt(n)+1),void L()}let s=window.wplms_course_data.api_url+"/user/quiz/"+e.quizid;e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!v&&(s=window.wplms_course_data.api_url+"/quiz/nonloggedin/"+e.quizid+"?client_id="+window.wplms_course_data.client_id),Y(s,!0,!0).then((t=>{fetch(window.wplms_course_data.api_url+"/user/coursestatus/retake_single_quiz/"+e.quizid+"?post",{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(n)}).then((e=>e.json())).then((t=>{if(t)if(t.status){if(L(),e.hasOwnProperty("update")&&e.update("retake_quiz"),firebase&&firebase.database&&firebase.auth().currentUser){let t=D;t&&t.hasOwnProperty("id")||(t=ts("vibebp").getUser()),firebase.database().ref(`quizes/${e.quizid}/users/${t.id}`).remove()}}else t.message&&(es("vibebp").addNotification({icon:"",text:t.message}),r(!1))}))})).catch((e=>{console.log(e),navigator&&!navigator.onLine&&(es("vibebp").addNotification({text:window.wplms_course_data.translations.could_not_retake_offline}),r(!1))}))})()},window.wplms_course_data.translations.retake),Xn("strong",null,window.wplms_course_data.translations.retakes_left," : ",t.meta.retakes)):""):"",b?Xn(qt,{hideQuestions:()=>y(!1),quiz:t,currentQuestions:i,update:R,filter:x,bookMarked:N}):"",t&&t.meta&&t.meta.questions&&t.meta.questions.length&&!b?Xn("span",{className:"show_questions",onClick:()=>y(!0)},Xn("span",null,window.wplms_course_data.translations.show_questions),Xn("span",{className:"vicon vicon-angle-double-right"})):"","live_contest"==t.quiz_type?Xn(Tn,{leaderboardData:T,quiz:t}):"")),Xn("div",{className:"quiz_questions_content"},Xn("div",{className:""},t.start||t.submitted?"":Xn("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),!t.start&&t.submitted?Xn("div",{className:""},Xn("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:t.meta.completion_message}}),!t.start&&t.submitted&&t.retake_html?Xn("div",{dangerouslySetInnerHTML:{__html:t.retake_html}}):""):"",t.start||!t.submitted||e.hasOwnProperty("activity")?"":!e.hasOwnProperty("non_logged_in_quiz")||e.hasOwnProperty("non_logged_in_quiz")&&!e.non_logged_in_quiz?Xn(Gt,{quizid:e.quizid}):"",t&&t.meta&&t.meta.questions&&t.submitted&&t.meta.auto&&t.show_advance_stats&&!e.hasOwnProperty("activity")?Xn($t,{quiz:t}):"",t&&t.meta&&se&&(t.start||t.submitted)?se.map(((o,u)=>{if(-1===i.indexOf(u))return;let c="",l="";o.hasOwnProperty("show_hint")&&o.show_hint?(l="question_hint_content message show",c="question_hint show"):(l="question_hint_content message",c="question_hint");let d=0;if("submit"!==s&&(!t.hasOwnProperty("submitted")||!t.submitted)&&o.hasOwnProperty("question_duration")&&o.question_duration){d=parseInt(o.question_duration);let e=localStorage.getItem("question_start_time"+o.key);if(e){let t=((new Date).getTime()-e)/1e3;d=t<d?Math.floor(d-t):0}else e=0,localStorage.setItem("question_start_time"+o.key,(new Date).getTime())}return Xn("div",{className:"question"},Xn("div",{className:"question_actions"},Xn("span",null,window.wplms_course_data.translations.question_full_prefix," ",u+1),Xn("div",null,Xn("span",{className:"marks"},Xn("i",{className:"vicon vicon-medall"}),o.marks),!e.hasOwnProperty("non_logged_in_quiz")||e.hasOwnProperty("non_logged_in_quiz")&&!e.non_logged_in_quiz?Xn("span",{className:O.indexOf(o.id)>-1?"is-loading":o.flagged?"flagged":"flag",onClick:()=>{I(o)}},Xn("i",{className:o.flagged?"vicon vicon-flag-alt":"vicon vicon-flag"})):"",o.hint?Xn("span",{className:c,onClick:e=>{let s={...t};s.meta.questions[u].hasOwnProperty("show_hint")&&s.meta.questions[u].show_hint?s.meta.questions[u].show_hint=!1:s.meta.questions[u].show_hint=!0,n(s)}}):"")),"submit"===s||t.hasOwnProperty("submitted")&&t.submitted||!o.hasOwnProperty("question_duration")||!o.question_duration?"":Xn(a,{question:{...o},update:Q,duration:d,start:!0}),U(o,u),!t.submitted&&t.start?Xn("span",{className:"bookmark button",onClick:()=>{(t=>{let n=[...N],s=n.indexOf(t.id);s<=-1?n.push(t.id):n.splice(s,1),localforage.setItem("bookmarked_questions_"+e.quizid,JSON.stringify(n)),S(n),n.length||"bookmarked"!=x||z(null)})(o)}},Xn("i",{className:N.indexOf(o.id)>-1?"vicon vicon-bookmark-alt":"vicon vicon-bookmark"})):"",o.attempted||!t.check_answer||t.submitted?"":!e.hasOwnProperty("non_logged_in_quiz")||e.hasOwnProperty("non_logged_in_quiz")&&!e.non_logged_in_quiz?Xn("div",{className:"checkanswer"===s?"check_answer button is-primary is-loading":"check_answer button is-primary",onClick:e=>{((e,s)=>{r("checkanswer");let i=tt(e,t.partial_marking,t.negative_marking,parseFloat(t.negative_marks),!0),a={...t};i.attempted=!0,i.hasOwnProperty("marked_answer")||(i.marked_answer=""),a.meta.questions[s]=i,fetch(window.wplms_course_data.api_url+"/user/saveuserquestion?post",{method:"POST",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({quiz_id:a.id,question:i,token:v})}).then((e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data})).then((e=>{if(r(!1),n(a),K(a),"live_contest"==a.quiz_type&&firebase){let e=0,t=0;if(a.meta.questions.map((n=>{n.attempted&&e++,n.hasOwnProperty("user_marks")&&(t+=n.user_marks)})),firebase&&firebase.auth()&&firebase.auth().currentUser){let n=D;n&&n.hasOwnProperty("id")||(n=ts("vibebp").getUser()),firebase.database().ref(`quizes/${a.id}/users/${n.id}/attempted`).set(e,(e=>{e&&console.log(e)})),firebase.database().ref(`quizes/${a.id}/users/${n.id}/marks`).set(parseFloat(t),(e=>{e&&console.log(e)}))}}})).catch((e=>{r(!1),console.error("Uh oh, an error!",e),es("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))})(o,u)}},window.wplms_course_data.translations.check_answer):"",o.hint?Xn("span",{className:l,dangerouslySetInnerHTML:{__html:o.hint}}):"",o.attempted?Xn(ut,{question:o}):"",o.attempted&&o.show_correct_answer&&o.explanation.length?Xn("div",{className:"explanation"},Xn("strong",null,window.wplms_course_data.translations.question_explanation),Xn("div",{dangerouslySetInnerHTML:{__html:o.explanation}})):"")})):"",t&&t.meta&&t.meta.questions&&(t.start||t.submitted)?Xn(Pt,{quiz:t,questions:[...se],currentQuestions:i,filter:x,update:R,bookMarked:N}):"")))):Xn(un,null)},{createElement:as,useState:os,useEffect:us,Fragment:cs,render:ls,useRef:ds}=wp.element,{dispatch:_s,select:ms}=wp.data,ps=e=>{let t=ms("vibebp").getUser();t.token=ms("vibebp").getToken(),us((()=>{window.scorm_page_type="course",window.scorm_wplms_data={},window.scorm_wplms_data.user_email=t.email,window.scorm_wplms_data.user_name=t.username,window.scorm_wplms_data.token=t.token,window.scorm_wplms_data.course_id=e.course_id,window.scorm_wplms_data.module_id=e.quiz_id,window.is_take_course=!0,window.scorm_wplms_data.type="quiz";var s=new CustomEvent("unit_content_loaded",{detail:{}});return document.dispatchEvent(s),document.addEventListener("scormquizsubmitted",n),()=>{document.removeEventListener("scormquizsubmitted",n)}}),[e.quiz_id]);const n=t=>{var n={coursestatus:e.coursestatus,action:"quizsubmitted",id:e.quiz_id,course_id:e.course_id},s=new CustomEvent("custom_quiz_action",{detail:n});document.dispatchEvent(s)};return as("div",{className:"ScormQuiz"},as("div",{className:"quiz_content"},as("div",{className:"new_quiz_scorm_wrapper wplms_iframe_wrapper",dangerouslySetInnerHTML:{__html:e.content_id}})))};document.addEventListener("custom_quiz_type",(e=>{"scorm"===e.detail.type&&setTimeout((()=>{ls(as(ps,{quiz_id:e.detail.id,course_id:e.detail.course_id,content_id:e.detail.content_id,coursestatus:e.detail.coursestatus}),document.querySelector("#scorm"))}),200)}),!1);const{createElement:hs,render:gs,useState:ws,useEffect:fs,Fragment:qs}=wp.element,{dispatch:bs,select:ys}=wp.data;document.addEventListener("userLoaded",(e=>{if(document.querySelector("#wplms_quiz"))if(document.querySelector("#wplms_quiz").getAttribute("quiz_type")&&document.querySelector("#wplms_quiz").getAttribute("quiz_type").length){var t={type:document.querySelector("#wplms_quiz").getAttribute("quiz_type"),id:document.querySelector("#wplms_quiz").getAttribute("data-id"),content_id:document.querySelector("#wplms_quiz").getAttribute("content_id")?document.querySelector("#wplms_quiz").getAttribute("content_id"):"undefined"!=typeof wplms_quiz_scorm_package?wplms_quiz_scorm_package:""},n=new CustomEvent("custom_quiz_type",{detail:t});document.dispatchEvent(n)}else gs(hs(is,{quizid:document.querySelector("#wplms_quiz").getAttribute("data-id"),type:document.querySelector("#wplms_quiz").getAttribute("data-type")}),document.querySelector("#wplms_quiz"))})),document.querySelector("#wplms_quiz")&&gs(hs((e=>{const[t,n]=ws({}),[s,r]=ws(!1),[i,a]=ws(!1);return fs((()=>{fetch(`${window.wplms_course_data.api_url}/post/excerpt/${e.quizid}?force`,{method:"post",body:JSON.stringify()}).then((e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data})).then((e=>{e.status&&e.hasOwnProperty("data")&&(document.dispatchEvent(new Event("VibeBP_Editor_Content")),n(e.data),e.hasOwnProperty("non_logged_in")&&r(!0),a(!0))})).catch((e=>{a(!0),console.error("Uh oh, an error!",e),bs("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))}),[e.quizid]),i?hs(qs,null,s?hs(is,{non_logged_in_quiz:1,quizid:document.querySelector("#wplms_quiz").getAttribute("data-id"),force:1}):hs("div",{className:"quiz_content"},hs("div",{dangerouslySetInnerHTML:{__html:t}}))):""}),{quizid:document.querySelector("#wplms_quiz").getAttribute("data-id"),type:document.querySelector("#wplms_quiz").getAttribute("data-type")}),document.querySelector("#wplms_quiz"))})();